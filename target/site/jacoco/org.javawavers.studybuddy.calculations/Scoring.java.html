<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Scoring.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">studybuddy</a> &gt; <a href="index.source.html" class="el_package">org.javawavers.studybuddy.calculations</a> &gt; <span class="el_source">Scoring.java</span></div><h1>Scoring.java</h1><pre class="source lang-java linenums">package org.javawavers.studybuddy.calculations;

/* This class is used to assign a score to each valid result
 * that could be used as a recommended study schedule for the user.
 * The SimulateAnnealing class produces 50 valid results.
 * Validity means that the tasks are distributed according to the user's
 * daily availability for studying.
 * Each result is then given a score to determine the most effective one
 * among those that are randomly produced.
 * The maximum score a valid result can achieve is 5.0.
 * -0.2 points are deducted each time the same task type (1-studying,
 * 2-revision, 3-assignment) for the same subject is assigned on the same day.
 * -0.1 points are deducted when the algorithm suggests that the user
 * should study the same subject two days in a row
 */

import java.util.ArrayList;
import java.util.List;

<span class="nc" id="L20">public class Scoring {</span>
  public static double calculateScore(List&lt;Task&gt; taskList, int[][] sch, int colSize) {
    // set the score at 5.0. The higher that can possibly be achieved
<span class="nc" id="L23">    double score = 5.0;</span>
    // creating a list that should contain each subject only once
<span class="nc" id="L25">    List&lt;String&gt; uniqueS = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L26" title="All 2 branches missed.">    for (Task task : taskList) {</span>
<span class="nc" id="L27">      String subject = task.getSubject();</span>
<span class="nc bnc" id="L28" title="All 2 branches missed.">      if (!uniqueS.contains(subject)) {</span>
<span class="nc" id="L29">        uniqueS.add(subject); // Προσθήκη του μαθήματος αν δεν υπάρχει ήδη</span>
      }
<span class="nc" id="L31">    }</span>

    // -0.2 penalty for the same task type for the same subject on the same day
    // for each day
<span class="nc bnc" id="L35" title="All 2 branches missed.">    for (int col = 0; col &lt; colSize; col++) {</span>

      // for each individual subject
<span class="nc bnc" id="L38" title="All 2 branches missed.">      for (String u : uniqueS) {</span>

        // we check if there is also a same task
<span class="nc bnc" id="L41" title="All 2 branches missed.">        for (int row = 0; row &lt; 12; row++) {</span>
<span class="nc bnc" id="L42" title="All 4 branches missed.">          if (sch[row][col] &gt;= 0 &amp;&amp; sch[row][col] &lt; taskList.size()) {</span>
<span class="nc" id="L43">            Task t = taskList.get(sch[row][col]);</span>
<span class="nc bnc" id="L44" title="All 2 branches missed.">            if (t.getTaskType() == 1) {</span>
              /*
               * checks if the subject from the subject list is the same as
               * the one from the task list
               */
<span class="nc bnc" id="L49" title="All 2 branches missed.">              if (u.equals(t.getSubject())) {</span>
<span class="nc" id="L50">                score -= 0.2;</span>
              }
            }

          } else {
            break;
          }
        }
<span class="nc" id="L58">      }</span>
    }

    // -0.1 penalty for studying the same subject two days in a row
    // For each column (day)
<span class="nc bnc" id="L63" title="All 2 branches missed.">    for (int col = 0; col &lt; colSize - 1; col++) {</span>
      // Traverse the tasks of the current day
<span class="nc bnc" id="L65" title="All 2 branches missed.">      for (int row = 0; row &lt; 12; row++) {</span>
<span class="nc bnc" id="L66" title="All 4 branches missed.">        if (sch[row][col] &gt;= 0 &amp;&amp; sch[row][col] &lt; taskList.size()) {</span>
<span class="nc" id="L67">          Task curTask = taskList.get(sch[row][col]);</span>
<span class="nc" id="L68">          String curSubject = curTask.getSubject();</span>
          // The type of the task (1: Study, 2: Revision, 3: Assignment)
<span class="nc" id="L70">          int curType = curTask.getTaskType();</span>

          // Check the next day
<span class="nc bnc" id="L73" title="All 2 branches missed.">          for (int nextRow = 0; nextRow &lt; 12; nextRow++) {</span>
<span class="nc bnc" id="L74" title="All 4 branches missed.">            if (sch[nextRow][col + 1] != 0 &amp;&amp; sch[nextRow][col + 1] &lt; taskList.size()) {</span>
<span class="nc" id="L75">              Task nextTask = taskList.get(sch[nextRow][col + 1]);</span>
<span class="nc" id="L76">              String nextSubject = nextTask.getSubject();</span>
<span class="nc" id="L77">              int nextType = nextTask.getTaskType();</span>

              // If the same subject and the same type of task is scheduled on consecutive
              // days
              // except from assignments
<span class="nc bnc" id="L82" title="All 6 branches missed.">              if (curSubject.equals(nextSubject) &amp;&amp; curType == nextType &amp;&amp; curType == 1) {</span>
                // Deduct 0.1 points
<span class="nc" id="L84">                score -= 0.1;</span>
<span class="nc" id="L85">                break;</span>
              }
            }
          }
        }
      }
    }
<span class="nc" id="L92">    return score;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>