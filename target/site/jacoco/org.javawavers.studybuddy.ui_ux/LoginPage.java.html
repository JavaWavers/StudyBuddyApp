<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LoginPage.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">studybuddy</a> &gt; <a href="index.source.html" class="el_package">org.javawavers.studybuddy.ui_ux</a> &gt; <span class="el_source">LoginPage.java</span></div><h1>LoginPage.java</h1><pre class="source lang-java linenums">package org.javawavers.studybuddy.ui_ux;

import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Alert;
import javafx.scene.control.Button;
import javafx.scene.control.DialogPane;
import javafx.scene.control.Label;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextField;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.scene.text.FontWeight;
import javafx.scene.text.Text;
import javafx.stage.Screen;

<span class="nc" id="L23">public class LoginPage {</span>

  private HBox rightPane;
  private HBox leftPane;
  private TextField emailField;
  private PasswordField passwordField;
  private TextField textField;
  private Button loginButton;
  private Button signupButton;
  private SceneManager sceneManager;

  public Scene login(SceneManager sceneManager) {
<span class="nc" id="L35">    HBox loginPage = new HBox();</span>
<span class="nc" id="L36">    this.sceneManager = sceneManager;</span>

<span class="nc" id="L38">    initRightPane();</span>
<span class="nc" id="L39">    initLeftPane();</span>
<span class="nc" id="L40">    setupEventHandlers();</span>

<span class="nc" id="L42">    loginPage.getChildren().addAll(leftPane, rightPane);</span>
<span class="nc" id="L43">    HBox.setHgrow(leftPane, Priority.ALWAYS);</span>
<span class="nc" id="L44">    HBox.setHgrow(rightPane, Priority.ALWAYS);</span>
<span class="nc" id="L45">    leftPane.setMinWidth(300);</span>
<span class="nc" id="L46">    rightPane.setMinWidth(300);</span>
<span class="nc" id="L47">    leftPane.setPrefWidth((Screen.getPrimary().getVisualBounds().getWidth()) / 2);</span>
<span class="nc" id="L48">    rightPane.setPrefWidth((Screen.getPrimary().getVisualBounds().getWidth()) / 2);</span>

<span class="nc" id="L50">    Scene scene =</span>
        new Scene(
            loginPage,
<span class="nc" id="L53">            Screen.getPrimary().getVisualBounds().getWidth(),</span>
<span class="nc" id="L54">            Screen.getPrimary().getVisualBounds().getHeight());</span>

<span class="nc" id="L56">    return scene;</span>
  }

  private void initRightPane() {
<span class="nc" id="L60">    rightPane = new HBox();</span>
<span class="nc" id="L61">    rightPane.setStyle(&quot;-fx-background-color: #65E165CF;&quot;);</span>
<span class="nc" id="L62">    rightPane.setPrefWidth(Screen.getPrimary().getVisualBounds().getWidth() / 2);</span>

<span class="nc" id="L64">    VBox rightVBox = new VBox(15);</span>
<span class="nc" id="L65">    rightVBox.setAlignment(Pos.CENTER);</span>
<span class="nc" id="L66">    rightVBox.setPadding(new Insets(30));</span>
<span class="nc" id="L67">    rightVBox.setFillWidth(true);</span>
<span class="nc" id="L68">    rightVBox.setMaxHeight(Double.MAX_VALUE);</span>

<span class="nc" id="L70">    Text welcomeText = new Text(&quot;Καλώς ήρθες!&quot;);</span>
<span class="nc" id="L71">    welcomeText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, 60));</span>
<span class="nc" id="L72">    welcomeText.setStyle(&quot;-fx-fill: black;&quot;);</span>

<span class="nc" id="L74">    Text messageLine1 = new Text(&quot;Έτοιμος να κάνεις το διάβασμα σου πιο &quot;);</span>
<span class="nc" id="L75">    messageLine1.setFont(Font.font(14));</span>

<span class="nc" id="L77">    Text messageLine2 = new Text(&quot;έξυπνο και αποτελεσματικό;&quot;);</span>
<span class="nc" id="L78">    messageLine2.setFont(Font.font(&quot;Arial&quot;, 14));</span>

<span class="nc" id="L80">    signupButton = new Button(&quot;Εγγραφή εδώ&quot;);</span>
<span class="nc" id="L81">    signupButton.setStyle(</span>
        &quot;-fx-font-family: 'System'; &quot;
            + &quot;-fx-font-size: 14px; &quot;
            + &quot;-fx-font-weight: bold; &quot;
            + &quot;-fx-text-fill: white; &quot;
            + &quot;-fx-background-color: #801EC8E6; &quot;
            + &quot;-fx-background-radius: 30px; &quot;
            + &quot;-fx-border-radius: 30px; &quot;
            + &quot;-fx-border-color: black;&quot;);

<span class="nc" id="L91">    rightPane</span>
<span class="nc" id="L92">        .widthProperty()</span>
<span class="nc" id="L93">        .addListener(</span>
            (obs, oldVal, newVal) -&gt; {
<span class="nc" id="L95">              double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L96">              messageLine2.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L97">              messageLine1.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L98">              welcomeText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L99">              signupButton.setStyle(</span>
                  &quot;-fx-font-family: 'System'; &quot;
                      + &quot;-fx-font-size: &quot;
                      + newSize
                      + &quot;px; &quot;
                      + &quot;-fx-font-weight: bold; &quot;
                      + &quot;-fx-text-fill: white; &quot;
                      + &quot;-fx-background-color: #801EC8E6; &quot;
                      + &quot;-fx-background-radius: 30px; &quot;
                      + &quot;-fx-border-radius: 30px; &quot;
                      + &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L110">            });</span>

<span class="nc" id="L112">    rightPane</span>
<span class="nc" id="L113">        .heightProperty()</span>
<span class="nc" id="L114">        .addListener(</span>
            (obs, oldVal, newVal) -&gt; {
<span class="nc" id="L116">              double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L117">              messageLine2.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L118">              messageLine1.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L119">              welcomeText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L120">              signupButton.setStyle(</span>
                  &quot;-fx-font-family: 'System'; &quot;
                      + &quot;-fx-font-size: &quot;
                      + newSize
                      + &quot;px; &quot;
                      + &quot;-fx-font-weight: bold; &quot;
                      + &quot;-fx-text-fill: white; &quot;
                      + &quot;-fx-background-color: #801EC8E6; &quot;
                      + &quot;-fx-background-radius: 30px; &quot;
                      + &quot;-fx-border-radius: 30px; &quot;
                      + &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L131">            });</span>

<span class="nc" id="L133">    Region upSpacer = new Region();</span>
<span class="nc" id="L134">    Region downSpacer = new Region();</span>
<span class="nc" id="L135">    VBox.setVgrow(upSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L136">    VBox.setVgrow(downSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L137">    rightVBox</span>
<span class="nc" id="L138">        .getChildren()</span>
<span class="nc" id="L139">        .addAll(upSpacer, welcomeText, messageLine1, messageLine2, signupButton, downSpacer);</span>

<span class="nc" id="L141">    Region leftSpacer = new Region();</span>
<span class="nc" id="L142">    Region rightSpacer = new Region();</span>
<span class="nc" id="L143">    HBox.setHgrow(leftSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L144">    HBox.setHgrow(rightSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L145">    VBox.setVgrow(rightVBox, Priority.ALWAYS);</span>

<span class="nc" id="L147">    rightPane.getChildren().addAll(leftSpacer, rightVBox, rightSpacer);</span>
<span class="nc" id="L148">  }</span>

  private void initLeftPane() {
<span class="nc" id="L151">    leftPane = new HBox();</span>
<span class="nc" id="L152">    leftPane.setStyle(&quot;-fx-background-color: #B563F1;&quot;);</span>
<span class="nc" id="L153">    leftPane.setPrefWidth(Screen.getPrimary().getVisualBounds().getWidth() / 2);</span>

<span class="nc" id="L155">    VBox leftVBox = new VBox(15);</span>
<span class="nc" id="L156">    leftVBox.setAlignment(Pos.CENTER);</span>
<span class="nc" id="L157">    leftVBox.setPadding(new Insets(30));</span>
<span class="nc" id="L158">    leftVBox.setFillWidth(true);</span>
<span class="nc" id="L159">    leftVBox.setMaxHeight(Double.MAX_VALUE);</span>

<span class="nc" id="L161">    Text joinText = new Text(&quot;Συνδέσου ξανά!&quot;);</span>
<span class="nc" id="L162">    joinText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, 60));</span>

<span class="nc" id="L164">    Label emailLabel = new Label(&quot;Email:&quot;);</span>
<span class="nc" id="L165">    emailLabel.setFont(new Font(14));</span>

<span class="nc" id="L167">    emailField = new TextField();</span>
<span class="nc" id="L168">    emailField.setPromptText(&quot;Enter your email&quot;);</span>

<span class="nc" id="L170">    Label passwordLabel = new Label(&quot;Password:&quot;);</span>
<span class="nc" id="L171">    passwordLabel.setFont(new Font(14));</span>

<span class="nc" id="L173">    passwordField = new PasswordField();</span>
<span class="nc" id="L174">    passwordField.setPromptText(&quot;Enter your password&quot;);</span>

<span class="nc" id="L176">    textField = new TextField();</span>
<span class="nc" id="L177">    textField.setManaged(false);</span>
<span class="nc" id="L178">    textField.setVisible(false);</span>

<span class="nc" id="L180">    Button toggleButton = new Button();</span>
<span class="nc" id="L181">    Image seeImage1 = new Image(getClass().getResource(&quot;/seePassword.png&quot;).toExternalForm());</span>
<span class="nc" id="L182">    Image notseeImage2 = new Image(getClass().getResource(&quot;/notseePassword.png&quot;).toExternalForm());</span>
<span class="nc" id="L183">    ImageView userImgView = new ImageView(seeImage1);</span>
<span class="nc" id="L184">    userImgView.setFitWidth(30);</span>
<span class="nc" id="L185">    userImgView.setFitHeight(30);</span>

<span class="nc" id="L187">    toggleButton.setGraphic(userImgView);</span>
<span class="nc" id="L188">    toggleButton.setStyle(&quot;-fx-font-size: 12px;&quot;);</span>
<span class="nc" id="L189">    toggleButton.setOnAction(</span>
      e -&gt; {
<span class="nc bnc" id="L191" title="All 2 branches missed.">      if (userImgView.getImage().equals(seeImage1)) {</span>
<span class="nc" id="L192">        userImgView.setImage(notseeImage2);</span>
      } else {
<span class="nc" id="L194">        userImgView.setImage(seeImage1);</span>
      }
<span class="nc" id="L196">      PasswordVisibility();</span>
<span class="nc" id="L197">    });</span>

<span class="nc" id="L199">    HBox passwordBox = new HBox(10, passwordField, textField, toggleButton);</span>

<span class="nc" id="L201">    loginButton = new Button(&quot;Συνδέσου&quot;);</span>
<span class="nc" id="L202">    loginButton.setStyle(</span>
        &quot;-fx-font-family: 'System'; &quot;
            + &quot;-fx-font-size: 14px; &quot;
            + &quot;-fx-font-weight: bold; &quot;
            + &quot;-fx-text-fill: white; &quot;
            + &quot;-fx-background-color:  rgba(14, 164, 43, 0.81); &quot;
            + &quot;-fx-background-radius: 30px; &quot;
            + &quot;-fx-border-radius: 30px; &quot;
            + &quot;-fx-border-color: black;&quot;);

<span class="nc" id="L212">    leftPane</span>
<span class="nc" id="L213">        .widthProperty()</span>
<span class="nc" id="L214">        .addListener(</span>
            (obs, oldVal, newVal) -&gt; {
<span class="nc" id="L216">              double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L217">              joinText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L218">              emailLabel.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L219">              emailField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L220">              passwordLabel.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L221">              passwordField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L222">              passwordField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L223">              textField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L224">              toggleButton.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L225">              loginButton.setStyle(</span>
                  &quot;-fx-font-family: 'System'; &quot;
                      + &quot;-fx-font-size: &quot;
                      + newSize
                      + &quot;px; &quot;
                      + &quot;-fx-font-weight: bold; &quot;
                      + &quot;-fx-background-color:  rgba(14, 164, 43, 0.81); &quot;
                      + &quot;-fx-text-fill: white; &quot;
                      + &quot;-fx-background-radius: 30px; &quot;
                      + &quot;-fx-border-radius: 30px; &quot;
                      + &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L236">            });</span>

<span class="nc" id="L238">    leftPane</span>
<span class="nc" id="L239">        .heightProperty()</span>
<span class="nc" id="L240">        .addListener(</span>
            (obs, oldVal, newVal) -&gt; {
<span class="nc" id="L242">              double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L243">              joinText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L244">              emailLabel.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L245">              emailField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L246">              passwordLabel.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L247">              passwordField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L248">              passwordField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L249">              textField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L250">              toggleButton.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L251">              loginButton.setStyle(</span>
                  &quot;-fx-font-family: 'System'; &quot;
                      + &quot;-fx-font-size: &quot;
                      + newSize
                      + &quot;px; &quot;
                      + &quot;-fx-font-weight: bold; &quot;
                      + &quot;-fx-text-fill: white; &quot;
                      + &quot;-fx-background-color:  rgba(14, 164, 43, 0.81); &quot;
                      + &quot;-fx-background-radius: 30px; &quot;
                      + &quot;-fx-border-radius: 30px; &quot;
                      + &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L262">            });</span>

<span class="nc" id="L264">    Region upSpacer = new Region();</span>
<span class="nc" id="L265">    Region downSpacer = new Region();</span>
<span class="nc" id="L266">    VBox.setVgrow(upSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L267">    VBox.setVgrow(downSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L268">    leftVBox</span>
<span class="nc" id="L269">        .getChildren()</span>
<span class="nc" id="L270">        .addAll(</span>
            upSpacer,
            joinText,
            emailLabel,
            emailField,
            passwordLabel,
            passwordBox,
            loginButton,
            downSpacer);

<span class="nc" id="L280">    Region leftSpacer = new Region();</span>
<span class="nc" id="L281">    Region rightSpacer = new Region();</span>
<span class="nc" id="L282">    HBox.setHgrow(leftSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L283">    HBox.setHgrow(rightSpacer, Priority.ALWAYS);</span>

<span class="nc" id="L285">    leftPane.getChildren().addAll(leftSpacer, leftVBox, rightSpacer);</span>
<span class="nc" id="L286">  }</span>

  private void setupEventHandlers() {
<span class="nc" id="L289">    signupButton.setOnAction(</span>
        event -&gt; {
<span class="nc" id="L291">          RegisterPage registerPage = new RegisterPage();</span>
<span class="nc" id="L292">          sceneManager.switchScene(registerPage.register(sceneManager));</span>
<span class="nc" id="L293">        });</span>

<span class="nc" id="L295">    loginButton.setOnAction(</span>
        event -&gt; {
<span class="nc" id="L297">          validateLogin();</span>
<span class="nc" id="L298">          clearFields();</span>
<span class="nc bnc" id="L299" title="All 2 branches missed.">          if (validateLogin()) {</span>
<span class="nc" id="L300">            MainFrame mainFrame = new MainFrame();</span>
<span class="nc" id="L301">            sceneManager.switchScene(mainFrame.mainFrame(sceneManager));</span>
          }
<span class="nc" id="L303">        });</span>
<span class="nc" id="L304">  }</span>

  private boolean validateLogin() {
<span class="nc" id="L307">    String email = emailField.getText();</span>
<span class="nc" id="L308">    String password = passwordField.getText();</span>

<span class="nc bnc" id="L310" title="All 4 branches missed.">    if (email.isEmpty() || password.isEmpty()) {</span>
<span class="nc" id="L311">      Alert alert = new Alert(Alert.AlertType.WARNING);</span>
<span class="nc" id="L312">      alert.setTitle(&quot;Η φόρμα δεν έχει ολοκληρωθεί&quot;);</span>
<span class="nc" id="L313">      alert.setHeaderText(null);</span>
<span class="nc" id="L314">      alert.setContentText(</span>
          &quot;Ωπ, κάτι ξέχασες! Ρίξε μια ματιά και συμπλήρωσε όλα τα απαραίτητα πεδία.&quot;);
<span class="nc" id="L316">      alert</span>
<span class="nc" id="L317">          .getDialogPane()</span>
<span class="nc" id="L318">          .getStylesheets()</span>
<span class="nc" id="L319">          .add(getClass().getResource(&quot;/alert.css&quot;).toExternalForm());</span>
<span class="nc" id="L320">      alert.getDialogPane().setMinWidth(500);</span>
<span class="nc" id="L321">      alert.getDialogPane().setMinHeight(300);</span>
<span class="nc" id="L322">      alert.showAndWait();</span>

<span class="nc" id="L324">      return false;</span>
<span class="nc bnc" id="L325" title="All 2 branches missed.">    } else if (email.equals(RegisterPage.storedEmail)</span>
<span class="nc bnc" id="L326" title="All 2 branches missed.">        &amp;&amp; password.equals(RegisterPage.storedPassword)) {</span>

<span class="nc" id="L328">      Alert alert = new Alert(Alert.AlertType.INFORMATION);</span>
<span class="nc" id="L329">      alert.setTitle(&quot;Σύνδεση Επιτυχής&quot;);</span>
<span class="nc" id="L330">      alert.setHeaderText(null);</span>
<span class="nc" id="L331">      alert.setContentText(&quot;Καλώς ήρθες!&quot;);</span>
<span class="nc" id="L332">      DialogPane dialogPane = alert.getDialogPane();</span>
<span class="nc" id="L333">      dialogPane.getStyleClass().add(&quot;success-alert&quot;);</span>
<span class="nc" id="L334">      dialogPane.getStylesheets().add(getClass().getResource(&quot;/success.css&quot;).toExternalForm());</span>

<span class="nc" id="L336">      return true;</span>
    } else {
<span class="nc" id="L338">      Alert alert = new Alert(Alert.AlertType.ERROR);</span>
<span class="nc" id="L339">      alert.setTitle(&quot;Σφάλμα σύνδεσης&quot;);</span>
<span class="nc" id="L340">      alert.setHeaderText(null);</span>
<span class="nc" id="L341">      alert.setContentText(&quot;Λάθος email ή κωδικός πρόσβασης.&quot;);</span>
<span class="nc" id="L342">      alert</span>
<span class="nc" id="L343">          .getDialogPane()</span>
<span class="nc" id="L344">          .getStylesheets()</span>
<span class="nc" id="L345">          .add(getClass().getResource(&quot;/alert.css&quot;).toExternalForm());</span>
<span class="nc" id="L346">      alert.getDialogPane().setMinWidth(500);</span>
<span class="nc" id="L347">      alert.getDialogPane().setMinHeight(300);</span>
<span class="nc" id="L348">      alert.showAndWait();</span>
<span class="nc" id="L349">      return false;</span>
    }
  }

  private void clearFields() {
<span class="nc" id="L354">    passwordField.clear();</span>
<span class="nc" id="L355">    textField.clear();</span>
<span class="nc" id="L356">    emailField.clear();</span>
<span class="nc" id="L357">  }</span>

  private void PasswordVisibility() {
<span class="nc bnc" id="L360" title="All 2 branches missed.">    if (passwordField.isVisible()) {</span>
<span class="nc" id="L361">      textField.setText(passwordField.getText());</span>
<span class="nc" id="L362">      passwordField.setVisible(false);</span>
<span class="nc" id="L363">      textField.setVisible(true);</span>
<span class="nc" id="L364">      passwordField.setManaged(false);</span>
<span class="nc" id="L365">      textField.setManaged(true);</span>
    } else {
<span class="nc" id="L367">      passwordField.setText(textField.getText());</span>
<span class="nc" id="L368">      textField.setVisible(false);</span>
<span class="nc" id="L369">      passwordField.setVisible(true);</span>
<span class="nc" id="L370">      textField.setManaged(false);</span>
<span class="nc" id="L371">      passwordField.setManaged(true);</span>
    }
<span class="nc" id="L373">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>