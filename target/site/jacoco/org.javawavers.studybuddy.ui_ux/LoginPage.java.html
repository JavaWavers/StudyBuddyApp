<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LoginPage.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">studybuddy</a> &gt; <a href="index.source.html" class="el_package">org.javawavers.studybuddy.ui_ux</a> &gt; <span class="el_source">LoginPage.java</span></div><h1>LoginPage.java</h1><pre class="source lang-java linenums">package org.javawavers.studybuddy.ui_ux;

import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.scene.text.FontWeight;
import javafx.scene.text.Text;
import javafx.stage.Screen;

<span class="nc" id="L16">public class LoginPage {</span>

  private HBox rightPane;
  private HBox leftPane;
  private TextField emailField;
  private PasswordField passwordField;
  private TextField textField;
  private Button loginButton;
  private Button signupButton;
  private SceneManager sceneManager;

  public Scene login(SceneManager sceneManager) {
<span class="nc" id="L28">    HBox loginPage = new HBox();</span>
<span class="nc" id="L29">    this.sceneManager = sceneManager;</span>

<span class="nc" id="L31">    initRightPane();</span>
<span class="nc" id="L32">    initLeftPane();</span>
<span class="nc" id="L33">    setupEventHandlers();</span>

<span class="nc" id="L35">    loginPage.getChildren().addAll(leftPane, rightPane);</span>
<span class="nc" id="L36">    HBox.setHgrow(leftPane, Priority.ALWAYS);</span>
<span class="nc" id="L37">    HBox.setHgrow(rightPane, Priority.ALWAYS);</span>
<span class="nc" id="L38">    leftPane.setMinWidth(300);</span>
<span class="nc" id="L39">    rightPane.setMinWidth(300);</span>
<span class="nc" id="L40">    leftPane.setPrefWidth((Screen.getPrimary().getVisualBounds().getWidth()) / 2);</span>
<span class="nc" id="L41">    rightPane.setPrefWidth((Screen.getPrimary().getVisualBounds().getWidth()) / 2);</span>

<span class="nc" id="L43">    Scene scene =</span>
        new Scene(
            loginPage,
<span class="nc" id="L46">            Screen.getPrimary().getVisualBounds().getWidth(),</span>
<span class="nc" id="L47">            Screen.getPrimary().getVisualBounds().getHeight());</span>

<span class="nc" id="L49">    return scene;</span>
  }

  private void initRightPane() {
<span class="nc" id="L53">    rightPane = new HBox();</span>
<span class="nc" id="L54">    rightPane.setStyle(&quot;-fx-background-color: #65E165CF;&quot;);</span>
<span class="nc" id="L55">    rightPane.setPrefWidth(Screen.getPrimary().getVisualBounds().getWidth() / 2);</span>

<span class="nc" id="L57">    VBox rightVBox = new VBox(15);</span>
<span class="nc" id="L58">    rightVBox.setAlignment(Pos.CENTER);</span>
<span class="nc" id="L59">    rightVBox.setPadding(new Insets(30));</span>
<span class="nc" id="L60">    rightVBox.setFillWidth(true);</span>
<span class="nc" id="L61">    rightVBox.setMaxHeight(Double.MAX_VALUE);</span>

<span class="nc" id="L63">    Text welcomeText = new Text(&quot;Καλώς ήρθες!&quot;);</span>
<span class="nc" id="L64">    welcomeText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, 60));</span>
<span class="nc" id="L65">    welcomeText.setStyle(&quot;-fx-fill: black;&quot;);</span>

<span class="nc" id="L67">    Text messageLine1 = new Text(&quot;Έτοιμος να κάνεις το διάβασμα σου πιο &quot;);</span>
<span class="nc" id="L68">    messageLine1.setFont(Font.font(14));</span>

<span class="nc" id="L70">    Text messageLine2 = new Text(&quot;έξυπνο και αποτελεσματικό;&quot;);</span>
<span class="nc" id="L71">    messageLine2.setFont(Font.font(&quot;Arial&quot;, 14));</span>

<span class="nc" id="L73">    signupButton = new Button(&quot;Εγγραφή εδώ&quot;);</span>
<span class="nc" id="L74">    signupButton.setStyle(</span>
        &quot;-fx-font-family: 'System'; &quot;
            + &quot;-fx-font-size: 14px; &quot;
            + &quot;-fx-font-weight: bold; &quot;
            + &quot;-fx-text-fill: white; &quot;
            + &quot;-fx-background-color: #801EC8E6; &quot;
            + &quot;-fx-background-radius: 30px; &quot;
            + &quot;-fx-border-radius: 30px; &quot;
            + &quot;-fx-border-color: black;&quot;);

<span class="nc" id="L84">    rightPane</span>
<span class="nc" id="L85">        .widthProperty()</span>
<span class="nc" id="L86">        .addListener(</span>
            (obs, oldVal, newVal) -&gt; {
<span class="nc" id="L88">              double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L89">              messageLine2.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L90">              messageLine1.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L91">              welcomeText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L92">              signupButton.setStyle(</span>
                  &quot;-fx-font-family: 'System'; &quot;
                      + &quot;-fx-font-size: &quot;
                      + newSize
                      + &quot;px; &quot;
                      + &quot;-fx-font-weight: bold; &quot;
                      + &quot;-fx-text-fill: white; &quot;
                      + &quot;-fx-background-color: #801EC8E6; &quot;
                      + &quot;-fx-background-radius: 30px; &quot;
                      + &quot;-fx-border-radius: 30px; &quot;
                      + &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L103">            });</span>

<span class="nc" id="L105">    rightPane</span>
<span class="nc" id="L106">        .heightProperty()</span>
<span class="nc" id="L107">        .addListener(</span>
            (obs, oldVal, newVal) -&gt; {
<span class="nc" id="L109">              double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L110">              messageLine2.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L111">              messageLine1.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L112">              welcomeText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L113">              signupButton.setStyle(</span>
                  &quot;-fx-font-family: 'System'; &quot;
                      + &quot;-fx-font-size: &quot;
                      + newSize
                      + &quot;px; &quot;
                      + &quot;-fx-font-weight: bold; &quot;
                      + &quot;-fx-text-fill: white; &quot;
                      + &quot;-fx-background-color: #801EC8E6; &quot;
                      + &quot;-fx-background-radius: 30px; &quot;
                      + &quot;-fx-border-radius: 30px; &quot;
                      + &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L124">            });</span>

<span class="nc" id="L126">    Region upSpacer = new Region();</span>
<span class="nc" id="L127">    Region downSpacer = new Region();</span>
<span class="nc" id="L128">    VBox.setVgrow(upSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L129">    VBox.setVgrow(downSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L130">    rightVBox</span>
<span class="nc" id="L131">        .getChildren()</span>
<span class="nc" id="L132">        .addAll(upSpacer, welcomeText, messageLine1, messageLine2, signupButton, downSpacer);</span>

<span class="nc" id="L134">    Region leftSpacer = new Region();</span>
<span class="nc" id="L135">    Region rightSpacer = new Region();</span>
<span class="nc" id="L136">    HBox.setHgrow(leftSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L137">    HBox.setHgrow(rightSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L138">    VBox.setVgrow(rightVBox, Priority.ALWAYS);</span>

<span class="nc" id="L140">    rightPane.getChildren().addAll(leftSpacer, rightVBox, rightSpacer);</span>
<span class="nc" id="L141">  }</span>

  private void initLeftPane() {
<span class="nc" id="L144">    leftPane = new HBox();</span>
<span class="nc" id="L145">    leftPane.setStyle(&quot;-fx-background-color: #B563F1;&quot;);</span>
<span class="nc" id="L146">    leftPane.setPrefWidth(Screen.getPrimary().getVisualBounds().getWidth() / 2);</span>

<span class="nc" id="L148">    VBox leftVBox = new VBox(15);</span>
<span class="nc" id="L149">    leftVBox.setAlignment(Pos.CENTER);</span>
<span class="nc" id="L150">    leftVBox.setPadding(new Insets(30));</span>
<span class="nc" id="L151">    leftVBox.setFillWidth(true);</span>
<span class="nc" id="L152">    leftVBox.setMaxHeight(Double.MAX_VALUE);</span>

<span class="nc" id="L154">    Text joinText = new Text(&quot;Συνδέσου ξανά!&quot;);</span>
<span class="nc" id="L155">    joinText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, 60));</span>

<span class="nc" id="L157">    Label emailLabel = new Label(&quot;Email:&quot;);</span>
<span class="nc" id="L158">    emailLabel.setFont(new Font(14));</span>

<span class="nc" id="L160">    emailField = new TextField();</span>
<span class="nc" id="L161">    emailField.setPromptText(&quot;Enter your email&quot;);</span>

<span class="nc" id="L163">    Label passwordLabel = new Label(&quot;Password:&quot;);</span>
<span class="nc" id="L164">    passwordLabel.setFont(new Font(14));</span>

<span class="nc" id="L166">    passwordField = new PasswordField();</span>
<span class="nc" id="L167">    passwordField.setPromptText(&quot;Enter your password&quot;);</span>

<span class="nc" id="L169">    textField = new TextField();</span>
<span class="nc" id="L170">    textField.setManaged(false);</span>
<span class="nc" id="L171">    textField.setVisible(false);</span>

<span class="nc" id="L173">    Button toggleButton = new Button(&quot;👁&quot;);</span>
<span class="nc" id="L174">    toggleButton.setStyle(&quot;-fx-font-size: 14px;&quot;);</span>
<span class="nc" id="L175">    toggleButton.setOnAction(e -&gt; PasswordVisibility());</span>

<span class="nc" id="L177">    HBox passwordBox = new HBox(10, passwordField, textField, toggleButton);</span>

<span class="nc" id="L179">    loginButton = new Button(&quot;Συνδέσου&quot;);</span>
<span class="nc" id="L180">    loginButton.setStyle(</span>
        &quot;-fx-font-family: 'System'; &quot;
            + &quot;-fx-font-size: 14px; &quot;
            + &quot;-fx-font-weight: bold; &quot;
            + &quot;-fx-text-fill: white; &quot;
            + &quot;-fx-background-color:  rgba(14, 164, 43, 0.81); &quot;
            + &quot;-fx-background-radius: 30px; &quot;
            + &quot;-fx-border-radius: 30px; &quot;
            + &quot;-fx-border-color: black;&quot;);

<span class="nc" id="L190">    leftPane</span>
<span class="nc" id="L191">        .widthProperty()</span>
<span class="nc" id="L192">        .addListener(</span>
            (obs, oldVal, newVal) -&gt; {
<span class="nc" id="L194">              double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L195">              joinText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L196">              emailLabel.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L197">              emailField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L198">              passwordLabel.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L199">              passwordField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L200">              passwordField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L201">              textField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L202">              toggleButton.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L203">              loginButton.setStyle(</span>
                  &quot;-fx-font-family: 'System'; &quot;
                      + &quot;-fx-font-size: &quot;
                      + newSize
                      + &quot;px; &quot;
                      + &quot;-fx-font-weight: bold; &quot;
                      + &quot;-fx-background-color:  rgba(14, 164, 43, 0.81); &quot;
                      + &quot;-fx-text-fill: white; &quot;
                      + &quot;-fx-background-radius: 30px; &quot;
                      + &quot;-fx-border-radius: 30px; &quot;
                      + &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L214">            });</span>

<span class="nc" id="L216">    leftPane</span>
<span class="nc" id="L217">        .heightProperty()</span>
<span class="nc" id="L218">        .addListener(</span>
            (obs, oldVal, newVal) -&gt; {
<span class="nc" id="L220">              double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L221">              joinText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L222">              emailLabel.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L223">              emailField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L224">              passwordLabel.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L225">              passwordField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L226">              passwordField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L227">              textField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L228">              toggleButton.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L229">              loginButton.setStyle(</span>
                  &quot;-fx-font-family: 'System'; &quot;
                      + &quot;-fx-font-size: &quot;
                      + newSize
                      + &quot;px; &quot;
                      + &quot;-fx-font-weight: bold; &quot;
                      + &quot;-fx-text-fill: white; &quot;
                      + &quot;-fx-background-color:  rgba(14, 164, 43, 0.81); &quot;
                      + &quot;-fx-background-radius: 30px; &quot;
                      + &quot;-fx-border-radius: 30px; &quot;
                      + &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L240">            });</span>

<span class="nc" id="L242">    Region upSpacer = new Region();</span>
<span class="nc" id="L243">    Region downSpacer = new Region();</span>
<span class="nc" id="L244">    VBox.setVgrow(upSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L245">    VBox.setVgrow(downSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L246">    leftVBox</span>
<span class="nc" id="L247">        .getChildren()</span>
<span class="nc" id="L248">        .addAll(</span>
            upSpacer,
            joinText,
            emailLabel,
            emailField,
            passwordLabel,
            passwordBox,
            loginButton,
            downSpacer);

<span class="nc" id="L258">    Region leftSpacer = new Region();</span>
<span class="nc" id="L259">    Region rightSpacer = new Region();</span>
<span class="nc" id="L260">    HBox.setHgrow(leftSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L261">    HBox.setHgrow(rightSpacer, Priority.ALWAYS);</span>

<span class="nc" id="L263">    leftPane.getChildren().addAll(leftSpacer, leftVBox, rightSpacer);</span>
<span class="nc" id="L264">  }</span>

  private void setupEventHandlers() {
<span class="nc" id="L267">    signupButton.setOnAction(</span>
        event -&gt; {
<span class="nc" id="L269">          RegisterPage registerPage = new RegisterPage();</span>
<span class="nc" id="L270">          sceneManager.switchScene(registerPage.register(sceneManager));</span>
<span class="nc" id="L271">        });</span>

<span class="nc" id="L273">    loginButton.setOnAction(</span>
        event -&gt; {
<span class="nc" id="L275">          validateLogin();</span>
<span class="nc bnc" id="L276" title="All 2 branches missed.">          if (validateLogin()) {</span>
<span class="nc" id="L277">            MainFrame mainFrame = new MainFrame();</span>
<span class="nc" id="L278">            sceneManager.switchScene(mainFrame.mainFrame(sceneManager));</span>
          }
<span class="nc" id="L280">        });</span>
<span class="nc" id="L281">  }</span>

  private boolean validateLogin() {
<span class="nc" id="L284">    String email = emailField.getText();</span>
<span class="nc" id="L285">    String password = passwordField.getText();</span>

<span class="nc bnc" id="L287" title="All 4 branches missed.">    if (email.isEmpty() || password.isEmpty()) {</span>
<span class="nc" id="L288">      Alert alert = new Alert(Alert.AlertType.WARNING);</span>
<span class="nc" id="L289">      alert.setTitle(&quot;Η φόρμα δεν έχει ολοκληρωθεί&quot;);</span>
<span class="nc" id="L290">      alert.setHeaderText(null);</span>
<span class="nc" id="L291">      alert.setContentText(</span>
          &quot;Ωπ, κάτι ξέχασες! Ρίξε μια ματιά και συμπλήρωσε όλα τα απαραίτητα πεδία.&quot;);
<span class="nc" id="L293">      alert</span>
<span class="nc" id="L294">          .getDialogPane()</span>
<span class="nc" id="L295">          .getStylesheets()</span>
<span class="nc" id="L296">          .add(getClass().getResource(&quot;alert.css&quot;).toExternalForm());</span>
<span class="nc" id="L297">      alert.getDialogPane().setMinWidth(500);</span>
<span class="nc" id="L298">      alert.getDialogPane().setMinHeight(300);</span>
<span class="nc" id="L299">      alert.showAndWait();</span>

<span class="nc" id="L301">      return false;</span>
<span class="nc bnc" id="L302" title="All 2 branches missed.">    } else if (email.equals(RegisterPage.storedEmail)</span>
<span class="nc bnc" id="L303" title="All 2 branches missed.">        &amp;&amp; password.equals(RegisterPage.storedPassword)) {</span>

<span class="nc" id="L305">      Alert alert = new Alert(Alert.AlertType.INFORMATION);</span>
<span class="nc" id="L306">      alert.setTitle(&quot;Σύνδεση Επιτυχής&quot;);</span>
<span class="nc" id="L307">      alert.setHeaderText(null);</span>
<span class="nc" id="L308">      alert.setContentText(&quot;Καλώς ήρθες!&quot;);</span>
<span class="nc" id="L309">      DialogPane dialogPane = alert.getDialogPane();</span>
<span class="nc" id="L310">      dialogPane.getStyleClass().add(&quot;success-alert&quot;);</span>
<span class="nc" id="L311">      dialogPane.getStylesheets().add(getClass().getResource(&quot;success.css&quot;).toExternalForm());</span>

<span class="nc" id="L313">      return true;</span>
    } else {
<span class="nc" id="L315">      Alert alert = new Alert(Alert.AlertType.ERROR);</span>
<span class="nc" id="L316">      alert.setTitle(&quot;Σφάλμα σύνδεσης&quot;);</span>
<span class="nc" id="L317">      alert.setHeaderText(null);</span>
<span class="nc" id="L318">      alert.setContentText(&quot;Λάθος email ή κωδικός πρόσβασης.&quot;);</span>
<span class="nc" id="L319">      alert</span>
<span class="nc" id="L320">          .getDialogPane()</span>
<span class="nc" id="L321">          .getStylesheets()</span>
<span class="nc" id="L322">          .add(getClass().getResource(&quot;alert.css&quot;).toExternalForm());</span>
<span class="nc" id="L323">      alert.getDialogPane().setMinWidth(500);</span>
<span class="nc" id="L324">      alert.getDialogPane().setMinHeight(300);</span>
<span class="nc" id="L325">      alert.showAndWait();</span>
<span class="nc" id="L326">      return false;</span>
    }
  }

  private void clearFields() {
<span class="nc" id="L331">    passwordField.clear();</span>
<span class="nc" id="L332">    textField.clear();</span>
<span class="nc" id="L333">    emailField.clear();</span>
<span class="nc" id="L334">  }</span>

  private void PasswordVisibility() {
<span class="nc bnc" id="L337" title="All 2 branches missed.">    if (passwordField.isVisible()) {</span>
<span class="nc" id="L338">      textField.setText(passwordField.getText());</span>
<span class="nc" id="L339">      passwordField.setVisible(false);</span>
<span class="nc" id="L340">      textField.setVisible(true);</span>
<span class="nc" id="L341">      passwordField.setManaged(false);</span>
<span class="nc" id="L342">      textField.setManaged(true);</span>
    } else {
<span class="nc" id="L344">      passwordField.setText(textField.getText());</span>
<span class="nc" id="L345">      textField.setVisible(false);</span>
<span class="nc" id="L346">      passwordField.setVisible(true);</span>
<span class="nc" id="L347">      textField.setManaged(false);</span>
<span class="nc" id="L348">      passwordField.setManaged(true);</span>
    }
<span class="nc" id="L350">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>