<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LoginPage.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">studybuddy</a> &gt; <a href="index.source.html" class="el_package">org.javawavers.studybuddy.ui_ux</a> &gt; <span class="el_source">LoginPage.java</span></div><h1>LoginPage.java</h1><pre class="source lang-java linenums">package org.javawavers.studybuddy.ui_ux;

import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.scene.text.FontWeight;
import javafx.scene.text.Text;
import javafx.stage.Screen;

<span class="nc" id="L16">public class LoginPage {</span>


    private HBox rightPane;
    private HBox leftPane;
    private TextField emailField;
    private PasswordField passwordField;
    private TextField textField;
    private Button loginButton;
    private Button signupButton;
    private SceneManager sceneManager;

    public Scene login(SceneManager sceneManager) {
<span class="nc" id="L29">        HBox loginPage = new HBox();</span>
<span class="nc" id="L30">        this.sceneManager = sceneManager;</span>

<span class="nc" id="L32">        initRightPane();</span>
<span class="nc" id="L33">        initLeftPane();</span>
<span class="nc" id="L34">        setupEventHandlers();</span>

<span class="nc" id="L36">        loginPage.getChildren().addAll(leftPane, rightPane);</span>
<span class="nc" id="L37">        HBox.setHgrow(leftPane, Priority.ALWAYS);</span>
<span class="nc" id="L38">        HBox.setHgrow(rightPane, Priority.ALWAYS);</span>
<span class="nc" id="L39">        leftPane.setMinWidth(300);</span>
<span class="nc" id="L40">        rightPane.setMinWidth(300);</span>
<span class="nc" id="L41">        leftPane.setPrefWidth((Screen.getPrimary().getVisualBounds().getWidth()) / 2);</span>
<span class="nc" id="L42">        rightPane.setPrefWidth((Screen.getPrimary().getVisualBounds().getWidth()) / 2);</span>

<span class="nc" id="L44">        Scene scene = new Scene(loginPage,</span>
<span class="nc" id="L45">            Screen.getPrimary().getVisualBounds().getWidth(),</span>
<span class="nc" id="L46">            Screen.getPrimary().getVisualBounds().getHeight());</span>

<span class="nc" id="L48">        return scene;</span>
    }

    private void initRightPane() {
<span class="nc" id="L52">        rightPane = new HBox();</span>
<span class="nc" id="L53">        rightPane.setStyle(&quot;-fx-background-color: #65E165CF;&quot;);</span>
<span class="nc" id="L54">        rightPane.setPrefWidth(Screen.getPrimary().getVisualBounds().getWidth() / 2);</span>

<span class="nc" id="L56">        VBox rightVBox = new VBox(15);</span>
<span class="nc" id="L57">        rightVBox.setAlignment(Pos.CENTER);</span>
<span class="nc" id="L58">        rightVBox.setPadding(new Insets(30));</span>
<span class="nc" id="L59">        rightVBox.setFillWidth(true);</span>
<span class="nc" id="L60">        rightVBox.setMaxHeight(Double.MAX_VALUE);</span>

<span class="nc" id="L62">        Text welcomeText = new Text(&quot;Καλώς ήρθες!&quot;);</span>
<span class="nc" id="L63">        welcomeText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, 60));</span>
<span class="nc" id="L64">        welcomeText.setStyle(&quot;-fx-fill: black;&quot;);</span>

<span class="nc" id="L66">        Text messageLine1 = new Text(&quot;Έτοιμος να κάνεις το διάβασμα σου πιο &quot;);</span>
<span class="nc" id="L67">        messageLine1.setFont(Font.font(14));</span>

<span class="nc" id="L69">        Text messageLine2 = new Text(&quot;έξυπνο και αποτελεσματικό;&quot;);</span>
<span class="nc" id="L70">        messageLine2.setFont(Font.font(&quot;Arial&quot;, 14));</span>

<span class="nc" id="L72">        signupButton = new Button(&quot;Εγγραφή εδώ&quot;);</span>
<span class="nc" id="L73">        signupButton.setStyle(&quot;-fx-font-family: 'System'; &quot; +</span>
            &quot;-fx-font-size: 14px; &quot; +
            &quot;-fx-font-weight: bold; &quot; +
            &quot;-fx-text-fill: white; &quot; +
            &quot;-fx-background-color: #801EC8E6; &quot; +
            &quot;-fx-background-radius: 30px; &quot; +
            &quot;-fx-border-radius: 30px; &quot; +
            &quot;-fx-border-color: black;&quot;);

<span class="nc" id="L82">        rightPane.widthProperty().addListener((obs, oldVal, newVal) -&gt; {</span>
<span class="nc" id="L83">            double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L84">            messageLine2.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L85">            messageLine1.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L86">            welcomeText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L87">            signupButton.setStyle(&quot;-fx-font-family: 'System'; &quot; +</span>
                &quot;-fx-font-size: &quot; + newSize + &quot;px; &quot; +
                &quot;-fx-font-weight: bold; &quot; +
                &quot;-fx-text-fill: white; &quot; +
                &quot;-fx-background-color: #801EC8E6; &quot; +
                &quot;-fx-background-radius: 30px; &quot; +
                &quot;-fx-border-radius: 30px; &quot; +
                &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L95">        });</span>

<span class="nc" id="L97">        rightPane.heightProperty().addListener((obs, oldVal, newVal) -&gt; {</span>
<span class="nc" id="L98">            double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L99">            messageLine2.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L100">            messageLine1.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L101">            welcomeText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L102">            signupButton.setStyle(&quot;-fx-font-family: 'System'; &quot; +</span>
                &quot;-fx-font-size: &quot; + newSize + &quot;px; &quot; +
                &quot;-fx-font-weight: bold; &quot; +
                &quot;-fx-text-fill: white; &quot; +
                &quot;-fx-background-color: #801EC8E6; &quot; +
                &quot;-fx-background-radius: 30px; &quot; +
                &quot;-fx-border-radius: 30px; &quot; +
                &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L110">        });</span>


<span class="nc" id="L113">        Region upSpacer = new Region();</span>
<span class="nc" id="L114">        Region downSpacer = new Region();</span>
<span class="nc" id="L115">        VBox.setVgrow(upSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L116">        VBox.setVgrow(downSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L117">        rightVBox.getChildren().addAll(upSpacer, welcomeText, messageLine1, messageLine2, signupButton, downSpacer);</span>


<span class="nc" id="L120">        Region leftSpacer = new Region();</span>
<span class="nc" id="L121">        Region rightSpacer = new Region();</span>
<span class="nc" id="L122">        HBox.setHgrow(leftSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L123">        HBox.setHgrow(rightSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L124">        VBox.setVgrow(rightVBox, Priority.ALWAYS);</span>


<span class="nc" id="L127">        rightPane.getChildren().addAll(leftSpacer, rightVBox, rightSpacer);</span>
<span class="nc" id="L128">    }</span>

    private void initLeftPane() {
<span class="nc" id="L131">        leftPane = new HBox();</span>
<span class="nc" id="L132">        leftPane.setStyle(&quot;-fx-background-color: #B563F1;&quot;);</span>
<span class="nc" id="L133">        leftPane.setPrefWidth(Screen.getPrimary().getVisualBounds().getWidth() / 2);</span>

<span class="nc" id="L135">        VBox leftVBox = new VBox(15);</span>
<span class="nc" id="L136">        leftVBox.setAlignment(Pos.CENTER);</span>
<span class="nc" id="L137">        leftVBox.setPadding(new Insets(30));</span>
<span class="nc" id="L138">        leftVBox.setFillWidth(true);</span>
<span class="nc" id="L139">        leftVBox.setMaxHeight(Double.MAX_VALUE);</span>

<span class="nc" id="L141">        Text joinText = new Text(&quot;Συνδέσου ξανά!&quot;);</span>
<span class="nc" id="L142">        joinText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, 60));</span>

<span class="nc" id="L144">        Label emailLabel = new Label(&quot;Email:&quot;);</span>
<span class="nc" id="L145">        emailLabel.setFont(new Font( 14));</span>

<span class="nc" id="L147">        emailField = new TextField();</span>
<span class="nc" id="L148">        emailField.setPromptText(&quot;Enter your email&quot;);</span>

<span class="nc" id="L150">        Label passwordLabel = new Label(&quot;Password:&quot;);</span>
<span class="nc" id="L151">        passwordLabel.setFont(new Font( 14));</span>

<span class="nc" id="L153">        passwordField = new PasswordField();</span>
<span class="nc" id="L154">        passwordField.setPromptText(&quot;Enter your password&quot;);</span>

<span class="nc" id="L156">        textField = new TextField();</span>
<span class="nc" id="L157">        textField.setManaged(false);</span>
<span class="nc" id="L158">        textField.setVisible(false);</span>

<span class="nc" id="L160">        Button toggleButton = new Button(&quot;👁&quot;);</span>
<span class="nc" id="L161">        toggleButton.setStyle(&quot;-fx-font-size: 14px;&quot;);</span>
<span class="nc" id="L162">        toggleButton.setOnAction(e -&gt; PasswordVisibility());</span>

<span class="nc" id="L164">        HBox passwordBox = new HBox(10, passwordField, textField, toggleButton);</span>

<span class="nc" id="L166">        loginButton = new Button(&quot;Συνδέσου&quot;);</span>
<span class="nc" id="L167">        loginButton.setStyle(&quot;-fx-font-family: 'System'; &quot; +</span>
            &quot;-fx-font-size: 14px; &quot; +
            &quot;-fx-font-weight: bold; &quot; +
            &quot;-fx-text-fill: white; &quot; +
            &quot;-fx-background-color:  rgba(14, 164, 43, 0.81); &quot; +
            &quot;-fx-background-radius: 30px; &quot; +
            &quot;-fx-border-radius: 30px; &quot; +
            &quot;-fx-border-color: black;&quot;);

<span class="nc" id="L176">        leftPane.widthProperty().addListener((obs, oldVal, newVal) -&gt; {</span>
<span class="nc" id="L177">            double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L178">            joinText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L179">            emailLabel.setFont(Font.font(&quot;Arial&quot;,  newSize));</span>
<span class="nc" id="L180">            emailField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L181">            passwordLabel.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L182">            passwordField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L183">            passwordField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L184">            textField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L185">            toggleButton.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L186">            loginButton.setStyle(&quot;-fx-font-family: 'System'; &quot; +</span>
                &quot;-fx-font-size: &quot; + newSize + &quot;px; &quot; +
                &quot;-fx-font-weight: bold; &quot; +
                &quot;-fx-background-color:  rgba(14, 164, 43, 0.81); &quot; +
                &quot;-fx-text-fill: white; &quot; +
                &quot;-fx-background-radius: 30px; &quot; +
                &quot;-fx-border-radius: 30px; &quot; +
                &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L194">        });</span>

<span class="nc" id="L196">        leftPane.heightProperty().addListener((obs, oldVal, newVal) -&gt; {</span>
<span class="nc" id="L197">            double newSize = newVal.doubleValue() / 30;</span>
<span class="nc" id="L198">            joinText.setFont(Font.font(&quot;Arial&quot;, FontWeight.BOLD, newSize));</span>
<span class="nc" id="L199">            emailLabel.setFont(Font.font(&quot;Arial&quot;,  newSize));</span>
<span class="nc" id="L200">            emailField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L201">            passwordLabel.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L202">            passwordField.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L203">            passwordField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L204">            textField.setFont(Font.font(&quot;Arial&quot;, newSize));</span>
<span class="nc" id="L205">            toggleButton.setStyle(&quot;-fx-font-size: &quot; + newSize + &quot;px;&quot;);</span>
<span class="nc" id="L206">            loginButton.setStyle(&quot;-fx-font-family: 'System'; &quot; +</span>
                &quot;-fx-font-size: &quot; + newSize + &quot;px; &quot; +
                &quot;-fx-font-weight: bold; &quot; +
                &quot;-fx-text-fill: white; &quot; +
                &quot;-fx-background-color:  rgba(14, 164, 43, 0.81); &quot; +
                &quot;-fx-background-radius: 30px; &quot; +
                &quot;-fx-border-radius: 30px; &quot; +
                &quot;-fx-border-color: black;&quot;);
<span class="nc" id="L214">        });</span>

<span class="nc" id="L216">        Region upSpacer = new Region();</span>
<span class="nc" id="L217">        Region downSpacer = new Region();</span>
<span class="nc" id="L218">        VBox.setVgrow(upSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L219">        VBox.setVgrow(downSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L220">        leftVBox.getChildren().addAll(upSpacer, joinText, emailLabel, emailField, passwordLabel, passwordBox, loginButton, downSpacer);</span>


<span class="nc" id="L223">        Region leftSpacer = new Region();</span>
<span class="nc" id="L224">        Region rightSpacer = new Region();</span>
<span class="nc" id="L225">        HBox.setHgrow(leftSpacer, Priority.ALWAYS);</span>
<span class="nc" id="L226">        HBox.setHgrow(rightSpacer, Priority.ALWAYS);</span>

<span class="nc" id="L228">        leftPane.getChildren().addAll(leftSpacer, leftVBox, rightSpacer);</span>
<span class="nc" id="L229">    }</span>

    private void setupEventHandlers() {
<span class="nc" id="L232">        signupButton.setOnAction(event -&gt; {</span>
<span class="nc" id="L233">            RegisterPage registerPage = new RegisterPage();</span>
<span class="nc" id="L234">            sceneManager.switchScene(registerPage.register(sceneManager));</span>
<span class="nc" id="L235">        });</span>

<span class="nc" id="L237">        loginButton.setOnAction(event -&gt; {</span>
<span class="nc" id="L238">            validateLogin();</span>
<span class="nc bnc" id="L239" title="All 2 branches missed.">            if(validateLogin()) {</span>
<span class="nc" id="L240">                MainFrame mainFrame = new MainFrame();</span>
<span class="nc" id="L241">                sceneManager.switchScene(mainFrame.mainFrame(sceneManager));</span>
            }
<span class="nc" id="L243">        });</span>
<span class="nc" id="L244">    }</span>

    private boolean validateLogin() {
<span class="nc" id="L247">        String email = emailField.getText();</span>
<span class="nc" id="L248">        String password = passwordField.getText();</span>

<span class="nc bnc" id="L250" title="All 4 branches missed.">        if (email.isEmpty() || password.isEmpty()) {</span>
<span class="nc" id="L251">            Alert alert = new Alert(Alert.AlertType.WARNING);</span>
<span class="nc" id="L252">            alert.setTitle(&quot;Η φόρμα δεν έχει ολοκληρωθεί&quot;);</span>
<span class="nc" id="L253">            alert.setHeaderText(null);</span>
<span class="nc" id="L254">            alert.setContentText(&quot;Ωπ, κάτι ξέχασες! Ρίξε μια ματιά και συμπλήρωσε όλα τα απαραίτητα πεδία.&quot;);</span>
<span class="nc" id="L255">            alert.getDialogPane().getStylesheets().add(getClass().getResource(&quot;alert.css&quot;).toExternalForm());</span>
<span class="nc" id="L256">            alert.getDialogPane().setMinWidth(500);</span>
<span class="nc" id="L257">            alert.getDialogPane().setMinHeight(300);</span>
<span class="nc" id="L258">            alert.showAndWait();</span>

<span class="nc" id="L260">            return false;</span>
<span class="nc bnc" id="L261" title="All 4 branches missed.">        } else if (email.equals(RegisterPage.storedEmail) &amp;&amp; password.equals(RegisterPage.storedPassword)) {</span>

<span class="nc" id="L263">            Alert alert = new Alert(Alert.AlertType.INFORMATION);</span>
<span class="nc" id="L264">            alert.setTitle(&quot;Σύνδεση Επιτυχής&quot;);</span>
<span class="nc" id="L265">            alert.setHeaderText(null);</span>
<span class="nc" id="L266">            alert.setContentText(&quot;Καλώς ήρθες!&quot;);</span>
<span class="nc" id="L267">            DialogPane dialogPane = alert.getDialogPane();</span>
<span class="nc" id="L268">            dialogPane.getStyleClass().add(&quot;success-alert&quot;);</span>
<span class="nc" id="L269">            dialogPane.getStylesheets().add(getClass().getResource(&quot;success.css&quot;).toExternalForm());</span>

<span class="nc" id="L271">            return true;</span>
        } else {
<span class="nc" id="L273">            Alert alert = new Alert(Alert.AlertType.ERROR);</span>
<span class="nc" id="L274">            alert.setTitle(&quot;Σφάλμα σύνδεσης&quot;);</span>
<span class="nc" id="L275">            alert.setHeaderText(null);</span>
<span class="nc" id="L276">            alert.setContentText(&quot;Λάθος email ή κωδικός πρόσβασης.&quot;);</span>
<span class="nc" id="L277">            alert.getDialogPane().getStylesheets().add(getClass().getResource(&quot;alert.css&quot;).toExternalForm());</span>
<span class="nc" id="L278">            alert.getDialogPane().setMinWidth(500);</span>
<span class="nc" id="L279">            alert.getDialogPane().setMinHeight(300);</span>
<span class="nc" id="L280">            alert.showAndWait();</span>
<span class="nc" id="L281">            return false;</span>
        }

    }

    private void clearFields() {
<span class="nc" id="L287">        passwordField.clear();</span>
<span class="nc" id="L288">        textField.clear();</span>
<span class="nc" id="L289">        emailField.clear();</span>
<span class="nc" id="L290">    }</span>

    private void PasswordVisibility() {
<span class="nc bnc" id="L293" title="All 2 branches missed.">        if (passwordField.isVisible()) {</span>
<span class="nc" id="L294">            textField.setText(passwordField.getText());</span>
<span class="nc" id="L295">            passwordField.setVisible(false);</span>
<span class="nc" id="L296">            textField.setVisible(true);</span>
<span class="nc" id="L297">            passwordField.setManaged(false);</span>
<span class="nc" id="L298">            textField.setManaged(true);</span>
        } else {
<span class="nc" id="L300">            passwordField.setText(textField.getText());</span>
<span class="nc" id="L301">            textField.setVisible(false);</span>
<span class="nc" id="L302">            passwordField.setVisible(true);</span>
<span class="nc" id="L303">            textField.setManaged(false);</span>
<span class="nc" id="L304">            passwordField.setManaged(true);</span>
        }
<span class="nc" id="L306">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>