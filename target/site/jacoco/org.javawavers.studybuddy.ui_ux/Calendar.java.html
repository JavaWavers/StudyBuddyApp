<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Calendar.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">studybuddy</a> &gt; <a href="index.source.html" class="el_package">org.javawavers.studybuddy.ui_ux</a> &gt; <span class="el_source">Calendar.java</span></div><h1>Calendar.java</h1><pre class="source lang-java linenums">
package org.javawavers.studybuddy.ui_ux;

import java.time.DayOfWeek;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.time.temporal.ChronoField;
import java.util.ArrayList;
import java.util.List;

import javafx.scene.Scene;
import javafx.scene.control.Alert;
import javafx.stage.Modality;
import javafx.stage.Screen;
import javafx.stage.StageStyle;
import org.javawavers.studybuddy.calculations.*;
import org.javawavers.studybuddy.courses.Assignment;
import org.javawavers.studybuddy.courses.Exam;
import org.javawavers.studybuddy.courses.ScheduledTask;
import org.javawavers.studybuddy.courses.Subject;

import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Node;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.ColumnConstraints;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.RowConstraints;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.shape.SVGPath;
import javafx.scene.text.Font;
import javafx.scene.text.FontWeight;
import javafx.stage.Stage;

<span class="nc" id="L39">public class Calendar {</span>
  private LocalDate currentWeekStart;
  // αρχικοποιουμε την μεταβλητη count
<span class="nc" id="L42">  int count = 0;</span>
<span class="nc" id="L43">  private ArrayList&lt;Week&gt; totalWeeks = new ArrayList&lt;&gt;();</span>

  //αρχικοποιουμε τις λιστες και τα vbox τα οποια χρησιμευουν στην δυναμικη επεξεργασια και εμφανιση των task
<span class="nc" id="L46">  public static List&lt;String&gt; notStartedYet = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L47">  public static List&lt;String&gt; completed = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L48">  private VBox upcomingTasksBox = new VBox(10);</span>
<span class="nc" id="L49">  private VBox completedTasksBox = new VBox(10);</span>

  public Node calendar() {
    // Αρχικοποιουμε ολα τα panel
<span class="nc" id="L53">    VBox centerPanel = createCenterPanel();</span>
<span class="nc" id="L54">    centerPanel.setPadding(new Insets(20));</span>
<span class="nc" id="L55">    return centerPanel;</span>

  }

  //μεθοδος για την δημιουργια του κεντρικου panel
  private VBox createCenterPanel() {
<span class="nc" id="L61">    VBox centerPanel = new VBox(10);</span>
<span class="nc" id="L62">    centerPanel.setPadding(new Insets(20));</span>
<span class="nc" id="L63">    centerPanel.setStyle(&quot;-fx-background-color: white;&quot;);</span>


    /*Δημιουργουμε ενα hbox για την διαταξη τον στοιχειων σε οριζοντια θεση
     *οριζουμε την θεση του οριζουμε την σημερινη μερα καθως και την εβδομαδα την οποια διανυει ο χρηστης
     *με την datetimeformater οριζουμε τον τροπο με τον οποιο θα εμφανιζεται το weeklabel
     *δημιουργουμε δυο κουμπια τα οποια θα ειναι για την πλοηγηση του χρηστη στις εβδομαδες και να μπορει να δει το προγραμμα του
     */
<span class="nc" id="L71">    HBox weekSwitcher = new HBox(10);</span>
<span class="nc" id="L72">    weekSwitcher.setTranslateY(40);</span>
<span class="nc" id="L73">    weekSwitcher.setAlignment(Pos.CENTER);</span>

<span class="nc" id="L75">    LocalDate today = LocalDate.now();</span>
<span class="nc" id="L76">    currentWeekStart = LocalDate.now().with(ChronoField.DAY_OF_WEEK, 1);</span>
<span class="nc" id="L77">    final DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;d MMM yyyy&quot;);</span>

    //αρχικοποιουμε την μεταβλητη weeklabel
<span class="nc" id="L80">    Label weekLabel = new Label(formatWeekLabel(currentWeekStart, formatter));</span>
<span class="nc" id="L81">    weekLabel.setFont(Font.font(&quot;System&quot;, FontWeight.BOLD, 16));</span>
<span class="nc" id="L82">    weekLabel.setStyle(&quot;-fx-text-fill: black;&quot;);</span>

    //HBox.setHgrow(weekLabel, Priority.ALWAYS);
    //βαζουμε τα κουμπια για να πλοηγειτε ο χρηστης στις εβδομαδες
<span class="nc" id="L86">    Button prevButton = new Button(&quot;&lt;&quot;);</span>
<span class="nc" id="L87">    prevButton.setStyle(&quot;-fx-background-color: #CF308C; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 30px;&quot;);</span>
<span class="nc" id="L88">    prevButton.setPrefSize(30, 30);</span>

<span class="nc" id="L90">    Button nextButton = new Button(&quot;&gt;&quot;);</span>
<span class="nc" id="L91">    nextButton.setStyle(&quot;-fx-background-color: #CF308C; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 30px;&quot;);</span>
<span class="nc" id="L92">    nextButton.setPrefSize(30, 30);</span>


<span class="nc" id="L95">    GridPane calendarGrid = new GridPane();</span>
<span class="nc" id="L96">    calendarGrid.setStyle(&quot;-fx-border-color: black;&quot;);</span>
<span class="nc" id="L97">    calendarGrid.setGridLinesVisible(true);</span>
    //μεταβλητη count η οποια μολις ο χρηστης παταει το κουμπι που παει τις εβδομαδες μπροστα αυξανεται αλλιως μειωνεται οταν count == 0 τοτε θα εεμφανιζετε το κουμπι today
<span class="nc" id="L99">    prevButton.setOnAction(event -&gt; {</span>
<span class="nc" id="L100">      currentWeekStart = currentWeekStart.minusWeeks(1);</span>
<span class="nc" id="L101">      weekLabel.setText(formatWeekLabel(currentWeekStart, formatter));</span>
<span class="nc bnc" id="L102" title="All 2 branches missed.">      if (count &gt; 0) {</span>
<span class="nc" id="L103">        count = count - 1;</span>
<span class="nc" id="L104">        createCalendarGrid(calendarGrid, count , SimulateAnnealing.getSubjects(), totalWeeks);</span>
      } else {
<span class="nc" id="L106">        Alert alert = new Alert(Alert.AlertType.WARNING);</span>
<span class="nc" id="L107">        alert.setTitle(&quot;oupss!&quot;);</span>
<span class="nc" id="L108">        alert.setHeaderText(null);</span>
<span class="nc" id="L109">        alert.setContentText(&quot;Δεν υπάρχουν προηγούμενες εβδομάδες&quot;);</span>
<span class="nc" id="L110">        alert.getDialogPane().getStylesheets().add(getClass().getResource(&quot;alert.css&quot;).toExternalForm());</span>
<span class="nc" id="L111">        alert.getDialogPane().setMinWidth(500);</span>
<span class="nc" id="L112">        alert.getDialogPane().setMinHeight(300);</span>
<span class="nc" id="L113">        alert.showAndWait();</span>
      }

<span class="nc" id="L116">    });</span>

<span class="nc" id="L118">    nextButton.setOnAction(event -&gt; {</span>
<span class="nc bnc" id="L119" title="All 2 branches missed.">      if(count &lt; totalWeeks.size() - 1 ) {</span>
<span class="nc" id="L120">        count++;</span>
<span class="nc" id="L121">        createCalendarGrid(calendarGrid, count, SimulateAnnealing.getSubjects(), totalWeeks);</span>
      } else {
<span class="nc" id="L123">        Alert alert = new Alert(Alert.AlertType.WARNING);</span>
<span class="nc" id="L124">        alert.setTitle(&quot;oupss!&quot;);</span>
<span class="nc" id="L125">        alert.setHeaderText(null);</span>
<span class="nc" id="L126">        alert.setContentText(&quot;Το πρόγραμμα της εξεταστικής σταματάει εδώ&quot;);</span>
<span class="nc" id="L127">        alert.getDialogPane().getStylesheets().add(getClass().getResource(&quot;alert.css&quot;).toExternalForm());</span>
<span class="nc" id="L128">        alert.getDialogPane().setMinWidth(500);</span>
<span class="nc" id="L129">        alert.getDialogPane().setMinHeight(300);</span>
<span class="nc" id="L130">        alert.showAndWait();</span>

      }
<span class="nc" id="L133">      currentWeekStart = currentWeekStart.plusWeeks(1);</span>
<span class="nc" id="L134">      weekLabel.setText(formatWeekLabel(currentWeekStart, formatter));</span>

<span class="nc" id="L136">    });</span>



<span class="nc" id="L140">    weekSwitcher.setTranslateY(40);</span>
<span class="nc" id="L141">    weekSwitcher.setAlignment(Pos.CENTER);</span>
<span class="nc" id="L142">    weekSwitcher.getChildren().addAll(prevButton, weekLabel, nextButton);</span>


<span class="nc" id="L145">    Button todayButton = new Button(&quot;Today&quot;);</span>
<span class="nc" id="L146">    todayButton.setStyle(&quot;-fx-background-color: #CF308C; -fx-background-radius: 30px; -fx-border-color: black; -fx-border-radius: 30px;&quot;);</span>
<span class="nc" id="L147">    todayButton.setFont(Font.font(&quot;System&quot;, FontWeight.BOLD, 14));</span>
<span class="nc" id="L148">    todayButton.setTextFill(Color.WHITE);</span>
<span class="nc" id="L149">    todayButton.setOnAction(event -&gt; {</span>
<span class="nc" id="L150">      createCalendarGrid(calendarGrid, 0, SimulateAnnealing.getSubjects(), totalWeeks);</span>
<span class="nc" id="L151">    });</span>

    //κουμπι για να βαζει ο χρηστης την διαθεσημοτητα
<span class="nc" id="L154">    Button availabilityButton = new Button(&quot;Availiability&quot;);</span>
<span class="nc" id="L155">    availabilityButton.setStyle(&quot;-fx-background-color: #CF308C; -fx-background-radius: 30px; -fx-border-color: black; -fx-border-radius: 30px;&quot;);</span>
<span class="nc" id="L156">    availabilityButton.setFont(Font.font(&quot;System&quot;, FontWeight.BOLD, 14));</span>
<span class="nc" id="L157">    availabilityButton.setTextFill(Color.WHITE);</span>
<span class="nc" id="L158">    availabilityButton.setPrefWidth(160);</span>

    //οριζουμε οταν ο ζρηστης παταει πανω στο κουμπι να ανοιγει την σελιδα popupdia
<span class="nc" id="L161">    availabilityButton.setOnAction(event -&gt;  {</span>
<span class="nc" id="L162">      AvailabilityPage availabilityPage = new AvailabilityPage();</span>
<span class="nc" id="L163">      VBox availPageLayout = availabilityPage.availabilityPage();</span>

<span class="nc" id="L165">      Stage popUpStage = new Stage();</span>
<span class="nc" id="L166">      popUpStage.initStyle(StageStyle.UTILITY);</span>
<span class="nc" id="L167">      popUpStage.initModality(Modality.APPLICATION_MODAL);</span>
<span class="nc" id="L168">      Stage parentStage = (Stage) ((Node) event.getSource()).getScene().getWindow();</span>

<span class="nc" id="L170">      double centerX = parentStage.getX() + parentStage.getWidth() / 2 - 300;</span>
<span class="nc" id="L171">      double centerY = parentStage.getY() + parentStage.getHeight() / 2 - 200;</span>

<span class="nc" id="L173">      popUpStage.setX(centerX);</span>
<span class="nc" id="L174">      popUpStage.setY(centerY);</span>

<span class="nc" id="L176">      Scene popUpScene = new Scene(availPageLayout, 600, 400);</span>
<span class="nc" id="L177">      popUpStage.setScene(popUpScene);</span>
<span class="nc" id="L178">      popUpStage.show();</span>
<span class="nc" id="L179">    });</span>

    //οριζουμε την θεση του κουμπιου availiability
<span class="nc" id="L182">    StackPane availabilityPane = new StackPane(availabilityButton);</span>
<span class="nc" id="L183">    availabilityPane.setPrefSize(150, 30);</span>
<span class="nc" id="L184">    availabilityPane.setLayoutX(centerPanel.getWidth() - 300);</span>
<span class="nc" id="L185">    availabilityPane.setLayoutY(200);</span>

    //κουμπι για Refresh του προογραμματος
<span class="nc" id="L188">    Button refreshButton = new Button();</span>
<span class="nc" id="L189">    refreshButton.setStyle(&quot;-fx-background-color: #CF308C; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 30px;&quot;);</span>
<span class="nc" id="L190">    refreshButton.setPrefSize(30, 30);</span>

    //προσθηκη εικονιδιου στο κουμπι για κυκλικα βελη
<span class="nc" id="L193">    SVGPath refreshIcon = new SVGPath();</span>
<span class="nc" id="L194">    refreshIcon.setContent(&quot;M12 2V5C7.58 5 4 8.58 4 13C4 15.27 5.05 17.36 6.77 18.63L8.22 17.18C7.04 16.17 6.27 14.67 6.27 13C6.27 9.8 8.8 7.27 12 7.27V10L16 6L12 2ZM18.23 4.37L16.78 5.82C17.96 6.83 18.73 8.33 18.73 10C18.73 13.2 16.2 15.73 13 15.73V12L9 16L13 20V17C17.42 17 21 13.42 21 9C21 6.73 19.95 4.64 18.23 4.37Z&quot;);</span>
<span class="nc" id="L195">    refreshIcon.setFill(Color.WHITE);</span>
<span class="nc" id="L196">    refreshButton.setGraphic(refreshIcon);</span>

<span class="nc" id="L198">    refreshButton.setOnAction(event -&gt; {</span>
<span class="nc" id="L199">      SimulateAnnealing sAnnealing = new SimulateAnnealing();</span>
<span class="nc" id="L200">      ExamPage exPage=new ExamPage();</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">      if(!exPage.getSubjects().isEmpty()){</span>
<span class="nc" id="L202">        System.out.print(&quot;Not empty subject list&quot;);</span>
      } else {
<span class="nc" id="L204">        System.out.println(&quot;empty&quot;);</span>
      }
<span class="nc bnc" id="L206" title="All 2 branches missed.">      for (Subject s : exPage.getSubjects()) {</span>
<span class="nc" id="L207">        sAnnealing.addSubject(s);</span>
<span class="nc" id="L208">      }</span>
<span class="nc" id="L209">      AssignmentPage as = new AssignmentPage();</span>
<span class="nc bnc" id="L210" title="All 2 branches missed.">      for (Assignment a : as.getAssignments() ) {</span>
<span class="nc" id="L211">        sAnnealing.subAss2(as.getTitle(), as.getDeadline(), as.getEstimateHours());</span>
<span class="nc" id="L212">      }</span>
<span class="nc" id="L213">      List&lt;Subject&gt; subject = SimulateAnnealing.getSubjects();</span>
<span class="nc" id="L214">      SimulateAnnealing.scheduleResult();</span>

<span class="nc" id="L216">      int [][] schedule = SimulateAnnealing.getSchedule();</span>
<span class="nc" id="L217">      int colSize = schedule[0].length;</span>
<span class="nc" id="L218">      ArrayList&lt;Task&gt; bestTask = new ArrayList&lt;&gt;(SimulateAnnealing.getBestTask());</span>
<span class="nc" id="L219">      LocalDate today2 = LocalDate.now(); // Today's date</span>
<span class="nc" id="L220">      DayOfWeek currentDayOfWeek = today2.getDayOfWeek();</span>
<span class="nc" id="L221">      int daysUntilMonday = currentDayOfWeek.getValue() - DayOfWeek.MONDAY.getValue();</span>

      // Initialize the first week
<span class="nc" id="L224">      Week currentWeek = new Week();</span>

      // Fill days before today with empty tasks
<span class="nc bnc" id="L227" title="All 2 branches missed.">      for (int i = 0; i &lt; daysUntilMonday; i++) {</span>
<span class="nc" id="L228">        Day emptyDay = new Day(); // Day with no tasks</span>
<span class="nc" id="L229">        currentWeek.getDaysOfWeek().add(emptyDay);</span>
      }

<span class="nc" id="L232">      List&lt;ScheduledTask&gt; scheduledTasksForDay = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L234" title="All 2 branches missed.">      for (int dayIndex = 0; dayIndex &lt; colSize; dayIndex++) {</span>
<span class="nc" id="L235">        LocalDate currentDate = today2.plusDays(dayIndex - daysUntilMonday); // Calculate current date</span>

        // Clear the scheduled tasks for the day
<span class="nc" id="L238">        scheduledTasksForDay.clear();</span>
<span class="nc bnc" id="L239" title="All 2 branches missed.">        for (int taskIndex = 0; taskIndex &lt; schedule.length; taskIndex++) {</span>
<span class="nc" id="L240">          int taskId = schedule[taskIndex][dayIndex];</span>
<span class="nc" id="L241">          String taskType = &quot; &quot;;</span>
<span class="nc bnc" id="L242" title="All 2 branches missed.">          if (taskId &gt; 0) { // If there is a task for the specific slot</span>
<span class="nc" id="L243">            Task task = bestTask.get(taskId); // Retrieve the Task from the list</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">            if (task.getTaskType() == 1) {</span>
<span class="nc" id="L245">              taskType = &quot;Διάβασμα&quot;;</span>
<span class="nc bnc" id="L246" title="All 2 branches missed.">            } else if (task.getTaskType() == 2) {</span>
<span class="nc" id="L247">              taskType = &quot;Επανάληψη&quot;;</span>
            } else {
<span class="nc" id="L249">              taskType = &quot;Εργασία&quot;;</span>
            }

<span class="nc" id="L252">            ScheduledTask scheduledTask = new ScheduledTask(</span>
<span class="nc" id="L253">                    task.getSubject(), taskType,</span>
<span class="nc" id="L254">                    (int) Math.ceil(task.getTaskHours()),</span>
                    currentDate,
<span class="nc" id="L256">                    new Subject(task.getSubject()) // Create Subject from the Task</span>
            );
<span class="nc" id="L258">            scheduledTasksForDay.add(scheduledTask);</span>
          }
        }

        // Create a Day object for the current day
<span class="nc" id="L263">        Day currentDay = new Day();</span>
<span class="nc" id="L264">        currentDay.todayTasks.addAll(scheduledTasksForDay);</span>

        // Add the day to the week
<span class="nc" id="L267">        currentWeek.getDaysOfWeek().add(currentDay);</span>

        // If the week is complete or it's the last day, save it
<span class="nc bnc" id="L270" title="All 4 branches missed.">        if (currentWeek.getDaysOfWeek().size() == 7 || dayIndex == colSize - 1) {</span>
<span class="nc" id="L271">          totalWeeks.add(currentWeek);</span>
<span class="nc" id="L272">          currentWeek = new Week(); // Start a new week</span>
        }
      }
<span class="nc" id="L275">      createCalendarGrid(calendarGrid, 0, subject, totalWeeks);</span>

<span class="nc" id="L277">    });</span>

    //βαζουμε ολα τα στοιχεια του κεντρου μαζι και τα επιστρεφουμε
<span class="nc" id="L280">    centerPanel.getChildren().addAll(weekSwitcher, todayButton, calendarGrid, availabilityPane, refreshButton);</span>

<span class="nc" id="L282">    return centerPanel;</span>

  }


  //δημιουργουμε τα checkbox
 /* private HBox createCheckBox(String taskName) {
    HBox checkBoxBox = new HBox(10);
    checkBoxBox.setAlignment(Pos.CENTER_LEFT);


    CheckBox taskCheckBox = new CheckBox(taskName);
    taskCheckBox.setStyle(&quot;-fx-font-size: 16px; -fx-text-fill: black;&quot;);

    taskCheckBox.setOnAction(event -&gt; {
      if (taskCheckBox.isSelected()) {
        if (notStartedYet.contains(taskName)) {
          notStartedYet.remove(taskName);
          completed.add(taskName);
        }
      } else {
        if (completed.contains(taskName)) {
          completed.remove(taskName);
          notStartedYet.add(taskName);
        }
      }

      //updateUpcomingTasks(upcomingTasksBox);
      //updateCompletedTasks(completedTasksBox);


      //System.out.println(&quot;Completed tasks: &quot; + completed);
    });

    checkBoxBox.getChildren().add(taskCheckBox);

    return checkBoxBox;
  }
*/
  //δημιουργουμε το ημερολογιο
  //δεν υπαρχει schedule

  private void createCalendarGrid(GridPane grid, int weeknumber, List&lt;Subject&gt; subject, List&lt;Week&gt; weeks) {
<span class="nc" id="L325">    grid.getChildren().removeIf(node -&gt; node instanceof Label);</span>
<span class="nc" id="L326">    grid.getColumnConstraints().clear();</span>
<span class="nc" id="L327">    grid.getRowConstraints().clear();</span>



<span class="nc" id="L331">    String[] days = {&quot;Δευτέρα&quot;, &quot;Τρίτη&quot;, &quot;Τετάρτη&quot;, &quot;Πέμπτη&quot;, &quot;Παρασκευή&quot;, &quot;Σάββατο&quot;, &quot;Κυριακή&quot;};</span>
// Get the list of weeks
<span class="nc" id="L333">    CreateWeekDay createWeekDay = new CreateWeekDay();</span>

    // Select the current week (adjust &quot;weeknumber&quot; based on your logic)
<span class="nc" id="L336">    Week thisWeek = weeks.get(weeknumber);</span>

    // Define grid dimensions
<span class="nc" id="L339">    int daysInWeek = 7;</span>

    // Set column constraints (for 7 days)
<span class="nc bnc" id="L342" title="All 2 branches missed.">    for (int i = 0; i &lt; daysInWeek; i++) {</span>
<span class="nc" id="L343">      ColumnConstraints column = new ColumnConstraints();</span>
<span class="nc" id="L344">      column.setPercentWidth(100.0 / 7); // Distribute columns equally</span>
<span class="nc" id="L345">      grid.getColumnConstraints().add(column);</span>
    }

// Add day titles (Δευτέρα, Τρίτη, ...)
<span class="nc bnc" id="L349" title="All 2 branches missed.">    for (int i = 0; i &lt; daysInWeek; i++) {</span>
<span class="nc" id="L350">      Label dayLabel = new Label(days[i]);</span>
<span class="nc" id="L351">      dayLabel.setStyle(&quot;-fx-font-weight: bold; -fx-border-color: gray; -fx-border-width: 0; -fx-alignment: center;&quot;);</span>
<span class="nc" id="L352">      dayLabel.setFont(Font.font(&quot;System&quot;, FontWeight.BOLD, 18));</span>
<span class="nc" id="L353">      dayLabel.setPrefHeight(60);</span>
<span class="nc" id="L354">      dayLabel.setPrefWidth(140);</span>
<span class="nc" id="L355">      GridPane.setConstraints(dayLabel, i, 0); // Place titles in the first row</span>
<span class="nc" id="L356">      grid.getChildren().add(dayLabel);</span>
    }

    // Set row constraints (for tasks in each day)
<span class="nc" id="L360">    int maxTasksPerDay = 13; // Adjust based on your needs</span>
<span class="nc bnc" id="L361" title="All 2 branches missed.">    for (int i = 1; i &lt;= maxTasksPerDay; i++) {</span>
<span class="nc" id="L362">      RowConstraints row = new RowConstraints();</span>
<span class="nc" id="L363">      row.setPercentHeight(100.0 / (maxTasksPerDay)); // Distribute rows equally</span>
<span class="nc" id="L364">      grid.getRowConstraints().add(row);</span>
    }

    // Start populating the grid with data
<span class="nc" id="L368">    int dayCount=0;</span>
<span class="nc bnc" id="L369" title="All 2 branches missed.">    for (Day d: thisWeek.getDaysOfWeek()){</span>
<span class="nc" id="L370">      int rowCount=1;</span>
<span class="nc bnc" id="L371" title="All 2 branches missed.">      if (!d.getTodayTasks().isEmpty()) {</span>
<span class="nc bnc" id="L372" title="All 2 branches missed.">        for (ScheduledTask s : d.getTodayTasks()) {</span>
<span class="nc" id="L373">          Label cell = new Label();</span>
<span class="nc" id="L374">          cell.setStyle(&quot;-fx-border-color: gray; -fx-border-width: 0; -fx-alignment: center;&quot;);</span>
<span class="nc" id="L375">          cell.setFont(Font.font(&quot;System&quot;, FontWeight.NORMAL, 14));</span>
<span class="nc" id="L376">          cell.setPrefSize(140, 60);</span>
<span class="nc" id="L377">          String taskText = s.getSubjectName() + &quot;: &quot; + s.getTaskName();</span>
<span class="nc" id="L378">          cell.setText(taskText);</span>

          // Add the task to the grid
<span class="nc" id="L381">          GridPane.setConstraints(cell, dayCount, rowCount);</span>
<span class="nc" id="L382">          grid.getChildren().add(cell);</span>
<span class="nc" id="L383">          cell.setOnMouseClicked(event -&gt; {</span>
<span class="nc" id="L384">            String taskDescription = &quot;κενο&quot;;</span>
<span class="nc" id="L385">            taskDescription = s.toString();</span>
<span class="nc" id="L386">            LocalDate examDate = null;</span>
<span class="nc" id="L387">            List&lt;Exam&gt; exams = Subject.getExams();</span>

<span class="nc bnc" id="L389" title="All 2 branches missed.">            if (subject != null) {</span>
<span class="nc bnc" id="L390" title="All 2 branches missed.">              for (Subject subj : subject) {</span>
<span class="nc bnc" id="L391" title="All 2 branches missed.">                if (taskDescription.contains(subj.getCourseName())) {</span>
<span class="nc bnc" id="L392" title="All 2 branches missed.">                  for (Exam exam : exams) {</span>
<span class="nc" id="L393">                    examDate = exam.getExamDate();</span>
<span class="nc" id="L394">                  }</span>
<span class="nc" id="L395">                  break;</span>
                }
<span class="nc" id="L397">              }</span>
            }
<span class="nc" id="L399">            Popupdiathesimotita popup = new Popupdiathesimotita();</span>
<span class="nc" id="L400">            popup.setTaskLists(notStartedYet, completed);</span>
<span class="nc" id="L401">            popup.setTaskDescription(taskDescription, examDate);</span>
<span class="nc" id="L402">            Stage popupStage = new Stage();</span>
<span class="nc" id="L403">            popup.start(popupStage);</span>
<span class="nc" id="L404">          });</span>
<span class="nc" id="L405">          rowCount++;</span>
<span class="nc" id="L406">        }</span>
<span class="nc" id="L407">        dayCount++;</span>
      }else{
<span class="nc" id="L409">        dayCount++;</span>
      }
<span class="nc" id="L411">    }</span>
    //int rowIndex = 1; // Start from the second row
    //for (int dayIndex = 0; dayIndex &lt; thisWeek.daysOfWeek.size(); dayIndex++) {
    //Day currentDay = thisWeek.daysOfWeek.get(dayIndex);
    //List&lt;ScheduledTask&gt; scheduledTasks = currentDay.todayTasks;

    // Populate each cell with the tasks of the day
    //for (int taskIndex = 0; taskIndex &lt; scheduledTasks.size(); taskIndex++) {
    //ScheduledTask task = scheduledTasks.get(taskIndex);

    // Create a label for each task
    //Label taskLabel = new Label(task.getSubject() + &quot; - &quot; + task.getTaskType() + &quot; (&quot; + task.getHours() + &quot;h)&quot;);
    //taskLabel.setStyle(&quot;-fx-border-color: gray; -fx-border-width: 0; -fx-padding: 5;&quot;);
    //taskLabel.setFont(Font.font(&quot;System&quot;, FontWeight.NORMAL, 14));
    //taskLabel.setPrefHeight(50);
    //taskLabel.setPrefWidth(140);

    // Add the task to the grid
    //GridPane.setConstraints(taskLabel, dayIndex, rowIndex + taskIndex);
    //grid.getChildren().add(taskLabel);
<span class="nc" id="L431">  }</span>
  private String formatWeekLabel(LocalDate weekStart, DateTimeFormatter formatter) {
<span class="nc" id="L433">    LocalDate weekEnd = weekStart.plusDays(6);</span>
<span class="nc" id="L434">    return String.format(&quot;%s - %s&quot;, formatter.format(weekStart), formatter.format(weekEnd));</span>
  }
}

//for (int col = 1; col &lt;= daysinWeek; col++) {
//for (int row = 1; row &lt; 14; row++) {
//1  7
//Label cell = new Label();
//System.out.println(&quot;scheduuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu&quot;);
//  cell.setStyle(&quot;-fx-border-color: gray; -fx-border-width: 0; -fx-alignment: center;&quot;);
// cell.setFont(Font.font(&quot;System&quot;, FontWeight.NORMAL, 14));
//  cell.setPrefSize(140, 60);
// Label cell = new Label();

//cell.setGraphic(new ImageView(image));
//cell.setStyle(&quot;-fx-border-color: gray; -fx-border-width: 0; -fx-alignment: center; -fx-pref-width: 140; -fx-pref-height: 60;&quot;);
//cell.setFont(Font.font(&quot;System&quot;, FontWeight.NORMAL, 14));
//cell.setPrefSize(140, 60);
//cell.setText(SimulateAnnealing.printSchedule(row, col));
//MainTestAlgorithm algorithm = new MainTestAlgorithm();
//cell.setText(algorithm.run(row, col));
// cell.setText(besttask.get(row).toString());
//ειναι λιστα το weekschedule οχι δισδιαστατος πινακασ


//if (selectedWeek != null &amp;&amp; besttask != null &amp;&amp;
//    row &lt; selectedWeek.length &amp;&amp; col &lt; selectedWeek[row].length &amp;&amp;
//        selectedWeek[row][col] &gt; 0 &amp;&amp; selectedWeek[row][col] &lt;= besttask.size()) {
//  System.out.println(&quot;scheduleweek&quot; + selectedWeek[row][col]);

//  int taskIndex = selectedWeek[row][col] - 1;// - 1

//  if (taskIndex &gt;= 0 &amp;&amp; taskIndex &lt;= besttask.size()) {
//cell.setText(besttask.get(taskIndex).toString());
//    String taskText = besttask.get(taskIndex).toString();
// cell.setText(taskText);
//    String firstWord = taskText.split(&quot; &quot;)[0];
//    for (Subject subje : subject) {
//      if (subje.getCourseName().equalsIgnoreCase(firstWord)) {

//cell.setGraphic(new ImageView(image));
//        cell.setText(firstWord);
//        cell.setStyle(&quot;-fx-border-color: gray; -fx-border-width: 0; -fx-alignment: center;&quot;);
//        break;
//      }
//    }
//  } else {
//  cell.setText(&quot;&quot;);
// }
//} else {
//  cell.setText(&quot;&quot;);
//}

          /*final int rowFinal = row;
          final int colFinal = col;

//οταν ο χρηστης παταει πανω σε οποιδηποτε κελη τοτε του εμφανιζεται η σελιδα popupdiathesimotita
          cell.setOnMouseClicked(event -&gt; {

            String taskDescription = &quot;κενο&quot;;
            LocalDate examDate = null;
            List&lt;Exam&gt; exams = Subject.getExams();

            if (selectedWeek != null &amp;&amp; besttask != null &amp;&amp;
                    rowFinal &lt; selectedWeek.length &amp;&amp; colFinal &lt; selectedWeek[rowFinal].length &amp;&amp;
                    selectedWeek[rowFinal][colFinal] &gt; 0 &amp;&amp; selectedWeek[rowFinal][colFinal] &lt;= besttask.size()) {

              int taskIndex = selectedWeek[rowFinal][colFinal] - 1;
              if (taskIndex &gt;= 0 &amp;&amp; taskIndex &lt; besttask.size()) {
                taskDescription = besttask.get(taskIndex).toString();
              }
            }
            if (subject != null) {
              for (Subject subj : subject) {
                if (taskDescription.contains(subj.getCourseName())) {
                  for (Exam exam : exams) {
                    examDate = exam.getExamDate();
                  }
                  break;
                }
              }
            }


            Popupdiathesimotita popup = new Popupdiathesimotita();
            popup.setTaskLists(notStartedYet, completed);
            popup.setTaskDescription(taskDescription, examDate);
            Stage popupStage = new Stage();
            popup.start(popupStage);
          });

          GridPane.setConstraints(cell, col, row);
          grid.getChildren().add(cell);
        }

           */

//οποτε καλειτε ανανεωνονται αναλογα με εκεινα τα δεδομενα το popup που εμφανιζετε
  /*private void updateUpcomingTasks(VBox upcomingTasksBox) {
    upcomingTasksBox.getChildren().clear();
    for (String taskDescription : notStartedYet) {
      //System.out.println(&quot;Add&quot; + taskDescription);
      HBox checkBoxBox = createCheckBox(taskDescription);
      upcomingTasksBox.getChildren().add(checkBoxBox);
    }
  }


  private void updateCompletedTasks(VBox completedTasksBox) {
    completedTasksBox.getChildren().clear();
    for (String taskDescription : completed) {
      HBox checkBoxBox = createCheckBox(taskDescription);
      //System.out.println(&quot;completed&quot; + taskDescription);
      completedTasksBox.getChildren().add(checkBoxBox);
    }
  }

  private String formatWeekLabel(LocalDate weekStart, DateTimeFormatter formatter) {
    LocalDate weekEnd = weekStart.plusDays(6);
    return String.format(&quot;%s - %s&quot;, formatter.format(weekStart), formatter.format(weekEnd));
  }
  //δημιουργια του pop up το οποιο ανοιγει οταν ο χρηστης πατησει οποιοδηποτε απο τα κουμπια ypcomingtasks/completedtasks
  private void showTasksPopup(String title, List&lt;String&gt; taskList) {
    Stage popupStage = new Stage();
    popupStage.initModality(Modality.APPLICATION_MODAL);
    popupStage.setTitle(title);

    VBox popupContent = new VBox(10);
    popupContent.setPadding(new Insets(10));
    popupContent.setAlignment(Pos.TOP_CENTER);
    //οριζουμε τον τιτλο αναλογα με το κουμπι  που εχει πατηθει
    Label titleLabel = new Label(title);
    titleLabel.setStyle(&quot;-fx-font-size: 18px; -fx-font-weight: bold;&quot;);
    //δημιουργουμε taskbox για τα task
    VBox tasksBox = new VBox(5);
    tasksBox.setAlignment(Pos.TOP_LEFT);
    tasksBox.setStyle(&quot;-fx-max-height: 300px;&quot;);

    //δημιουργουμε scrollpane για να μπορει ο χρηστης να κανει scroll και να δει ολα τα task τα οποια εχει να κανει εκεινη την εβδομαδα
    ScrollPane scrollPane = new ScrollPane();
    scrollPane.setContent(tasksBox);
    scrollPane.setFitToWidth(true);
    scrollPane.setPrefHeight(300);

    Map&lt;CheckBox, String&gt; taskCheckBoxMap = new HashMap&lt;&gt;();

    //δημιουργουμε τα checkbox
    if (taskList != null &amp;&amp; !taskList.isEmpty()) {
      for (String task : taskList) {
        CheckBox checkBox = new CheckBox(task);
        checkBox.setStyle(&quot;-fx-font-size: 14px;&quot;);

        //αν το task ειναι στην λιστα notstartedyet ειναι unselected αλλιως στην completed τα task ειναι selected
        if (taskList == notStartedYet &amp;&amp; !completed.contains(task)) {
          checkBox.setSelected(false);
        } else if (taskList == completed &amp;&amp; notStartedYet.contains(task)) {
          checkBox.setSelected(true);
        }

        tasksBox.getChildren().add(checkBox);
        taskCheckBoxMap.put(checkBox, task);//map για να ελενγχουμε τα task με το checkbox
      }
    } else {
      Label noTasksLabel = new Label(&quot;No tasks available&quot;);//στην περιπτωση που δεν υπαρχουν task
      tasksBox.getChildren().add(noTasksLabel);
    }
    //δημιουργια κουμπιου οκ που οταν πατηθει αναλογα με το τι εχει πατησει ο χρηστης ενημερωνει τις δυο λιστες
    Button okButton = new Button(&quot;OK&quot;);
    okButton.setStyle(&quot;-fx-background-color: #50D1C6; -fx-background-radius: 30px; -fx-text-fill: white; -fx-font-size: 16px;&quot;);
    okButton.setOnAction(event -&gt; {

      for (Map.Entry&lt;CheckBox, String&gt; entry : taskCheckBoxMap.entrySet()) {
        CheckBox checkBox = entry.getKey();
        String task = entry.getValue();

        if (checkBox.isSelected() &amp;&amp; taskList == notStartedYet) {
          notStartedYet.remove(task);
          completed.add(task);
        } else if (!checkBox.isSelected() &amp;&amp; taskList == completed) {
          completed.remove(task);
          notStartedYet.add(task);
        }
      }
      popupStage.close();
      //ενημερωνουμε τα taskboxes
      updateUpcomingTasks(upcomingTasksBox);
      updateCompletedTasks(completedTasksBox);
    });

    popupContent.getChildren().addAll(titleLabel, scrollPane, okButton);

    Scene popupScene = new Scene(popupContent, 300, 400);
    popupStage.setScene(popupScene);
    popupStage.showAndWait();
  }


  private Button createCircularButton(String text, String color) {
    Button button = new Button(text);
    button.setStyle(
        &quot;-fx-background-color: &quot; + color + &quot;;&quot; +
            &quot;-fx-text-fill: black; &quot; +
            &quot;-fx-font-size: 18px; &quot; +
            &quot;-fx-padding: 10px 20px; &quot; +
            &quot;-fx-background-radius: 5px; &quot; +
            &quot;-fx-border-color: black; &quot; +
            &quot;-fx-border-radius: 5px; &quot; +
            &quot;-fx-min-width: 200px;&quot;
    );
    return button;
  }



  //αρχικοποιησει των λιστων
  private void initializeTaskLists(List&lt;Task&gt; besttask) {
    for (Task task : besttask) {
      notStartedYet.add(task.toString());
    }

    completed = new ArrayList&lt;&gt;();

    updateUpcomingTasks(upcomingTasksBox);
    updateCompletedTasks(completedTasksBox);
  }

   */
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>