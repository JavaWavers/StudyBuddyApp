<?xml version="1.0" encoding="UTF-8"?>
<pmd-cpd>
   <duplication lines="37" tokens="238">
      <file begintoken="11561" column="5" endcolumn="25" endline="420" endtoken="11798"
            line="384"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\database\ActiveUser.java"/>
      <file begintoken="12476" column="5" endcolumn="25" endline="574" endtoken="12713"
            line="538"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\database\ActiveUser.java"/>
      <codefragment><![CDATA[    List<ScheduledTask> scheduledTasks = new ArrayList<>();

    try (Connection c = DataBaseManager.connect();
        PreparedStatement ps = c.prepareStatement(sql)) {
      ps.setInt(1, userId);
      try (ResultSet rs = ps.executeQuery()) {
        while (rs.next()) {
          String taskName = rs.getString("taskName");
          int hoursAllocated = rs.getInt("hoursAllocated");
          String taskTypeString = rs.getString("taskStatus");
          ScheduledTask.TaskStatus taskStatus =
              ScheduledTask.TaskStatus.valueOf(taskTypeString.toUpperCase());
          String dstring = rs.getString("taskDate");
          LocalDate taskDate = LocalDate.parse(dstring, FORMATTER);
          String subjectName = rs.getString("subjectName");
          String taskType = rs.getString("taskType");
          String timeStString = rs.getString("timeStarted");
          LocalTime timeStarted = LocalTime.parse(timeStString);
          String timeComString = rs.getString("timeCompleted");
          LocalTime timeCompleted = LocalTime.parse(timeComString);
          int taskId = rs.getInt("taskId");
          ScheduledTask t =
              new ScheduledTask(
                  taskName,
                  taskType,
                  hoursAllocated,
                  taskStatus,
                  timeStarted,
                  timeCompleted,
                  taskDate,
                  subjectName);
          t.setTaskId(taskId);
          scheduledTasks.add(t);
        }
      }
    } catch (SQLException e) {
      System.err.println("Σφάλμα κατά την ανάκτηση Task : " + e.getMessage());]]></codefragment>
   </duplication>
   <duplication lines="28" tokens="206">
      <file begintoken="13953" column="13" endcolumn="3" endline="142" endtoken="14158"
            line="115"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\database\DataInserter.java"/>
      <file begintoken="14807" column="13" endcolumn="3" endline="295" endtoken="15012"
            line="268"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\database\DataInserter.java"/>
      <codefragment><![CDATA[            + "timeCompleted, taskStatus, taskDate, subjectName, taskType,"
            + "userId, dayId) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);";
    try (Connection c = DataBaseManager.connect();
        PreparedStatement ps = c.prepareStatement(sql)) {
      ps.setString(1, taskName);
      ps.setInt(2, hoursAllocated);
      if (timeStarted == null) {
        System.out.println("timeStarted είναι null. Χρησιμοποιώ προεπιλεγμένη ώρα 09:00");
        timeStarted = LocalTime.of(9, 0);
      }
      if (timeCompleted == null) {
        System.out.println("timeCompleted is null, set to 11:00");
        timeCompleted = LocalTime.of(11, 0);
      }
      ps.setString(3, timeStarted.format(formatter));
      ps.setString(4, timeCompleted.format(formatter));
      ps.setString(5, taskStatus.name());
      ps.setString(6, taskDate.format(FORMATTER));
      ps.setString(7, subjectName);
      ps.setString(8, taskType);
      ps.setInt(9, userId);
      ps.setInt(10, dayId);
      ps.executeUpdate();
      System.out.println("Το task εισάχθηκε με επιτυχία.");
    } catch (SQLException e) {
      System.err.println("Σφάλμα κατά την εισαγωγή εργασίας.");
    }
  }]]></codefragment>
   </duplication>
   <duplication lines="15" tokens="171">
      <file begintoken="31820" column="23" endcolumn="71" endline="192" endtoken="31990"
            line="178"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\ui_ux\RegisterPage.java"/>
      <file begintoken="32052" column="24" endcolumn="71" endline="226" endtoken="32222"
            line="212"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\ui_ux\RegisterPage.java"/>
      <codefragment><![CDATA[        .widthProperty()
        .addListener(
            (obs, oldVal, newVal) -> {
              double newSize = newVal.doubleValue() / 30;
              joinText.setFont(Font.font("Arial", FontWeight.BOLD, newSize));
              nameField.setFont(Font.font("Arial", newSize));
              nameLabel.setFont(Font.font("Arial", newSize));
              emailField.setFont(Font.font("Arial", newSize));
              emailLabel.setFont(Font.font("Arial", newSize));
              passwordField.setFont(Font.font("Arial", newSize));
              passwordLabel.setFont(Font.font("Arial", newSize));
              textField.setFont(Font.font("Arial", newSize));
              toggleButton.setFont(Font.font("Arial", newSize));
              toggleConfirmPasswordButton.setFont(Font.font("Arial", newSize));
              confirmPasswordField.setFont(Font.font("Arial", newSize));]]></codefragment>
   </duplication>
   <duplication lines="19" tokens="137">
      <file begintoken="27665" column="23" endcolumn="23" endline="232" endtoken="27801"
            line="214"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\ui_ux\LoginPage.java"/>
      <file begintoken="27817" column="24" endcolumn="23" endline="258" endtoken="27953"
            line="240"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\ui_ux\LoginPage.java"/>
      <codefragment><![CDATA[        .widthProperty()
        .addListener(
            (obs, oldVal, newVal) -> {
              double newSize = newVal.doubleValue() / 30;
              joinText.setFont(Font.font("Arial", FontWeight.BOLD, newSize));
              emailLabel.setFont(Font.font("Arial", newSize));
              emailField.setStyle("-fx-font-size: " + newSize + "px;");
              passwordLabel.setFont(Font.font("Arial", newSize));
              passwordField.setStyle("-fx-font-size: " + newSize + "px;");
              passwordField.setFont(Font.font("Arial", newSize));
              textField.setFont(Font.font("Arial", newSize));
              toggleButton.setStyle("-fx-font-size: " + newSize + "px;");
              loginButton.setStyle(
                  "-fx-font-family: 'System'; "
                      + "-fx-font-size: "
                      + newSize
                      + "px; "
                      + "-fx-font-weight: bold; "
                      + "-fx-background-color:  rgba(14, 164, 43, 0.81); "]]></codefragment>
   </duplication>
   <duplication lines="22" tokens="127">
      <file begintoken="18419" column="27" endcolumn="63" endline="199" endtoken="18545"
            line="178"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\ui_ux\AssignmentPage.java"/>
      <file begintoken="24478" column="23" endcolumn="63" endline="186" endtoken="24604"
            line="167"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\ui_ux\ExamPage.java"/>
      <codefragment><![CDATA[    info.add(deadlineLabel, 0, 3);
    info.add(datePicker, 1, 3);

    info.setStyle(Styles.BLACK_BORDER);
    infoVBox.getChildren().addAll(infoTitle, info);

    infoVBox.setMaxWidth(400);
    infoVBox.setPrefWidth(400);
    return infoVBox;
  }

  // Section for course evaluation
  private VBox evalSection() {
    VBox evalVBox = new VBox(10);
    Label evalTitle = new Label("Αξιολόγηση:");
    evalTitle.setStyle(Styles.StyleType.TITLE.getStyle());
    GridPane eval = new GridPane();
    eval.setVgap(10);
    eval.setHgap(10);

    Label difficultyLabel = new Label("Δυσκολία:");
    difficultyLabel.setStyle(Styles.StyleType.LABEL.getStyle());]]></codefragment>
   </duplication>
   <duplication lines="18" tokens="103">
      <file begintoken="17920" column="90" endcolumn="28" endline="109" endtoken="18022"
            line="92"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\ui_ux\AssignmentPage.java"/>
      <file begintoken="19639" column="98" endcolumn="34" endline="190" endtoken="19741"
            line="174"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\ui_ux\AvailabilityPage.java"/>
      <file begintoken="25156" column="81" endcolumn="28" endline="296" endtoken="25258"
            line="279"
            path="C:\Users\Zpela\Documents\StudyBuddyApp\src\main\java\org\javawavers\studybuddy\ui_ux\ExamPage.java"/>
      <codefragment><![CDATA[      errors.add("• Πρέπει να επιλέξεις ημερομηνία εξέτασης μετά τη σημερινή ημερομηνία.");
    }

    if (!errors.isEmpty()) {
      Alert alert = new Alert(Alert.AlertType.WARNING);
      alert.setTitle("Η φόρμα δεν έχει ολοκληρωθεί");
      alert.setHeaderText(null);
      String errorMessage = String.join("\n", errors);
      alert.setContentText(errorMessage);
      alert
          .getDialogPane()
          .getStylesheets()
          .add(getClass().getResource("/alert.css").toExternalForm());
      alert.showAndWait();
      return;
    } else {
      Alert successAlert = new Alert(Alert.AlertType.INFORMATION);
      successAlert.setTitle("Εισαγωγή Εργασίας Επιτυχής");]]></codefragment>
   </duplication>
</pmd-cpd>